<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>âœ¨ å…¨èƒ½å‰ç«¯å·¥å…·ç®± | ESA Pageså‚èµ›ä½œå“</title>
    <style>
        /* å…¨å±€CSSå˜é‡ - ä¸»é¢˜ç³»ç»Ÿ */
        :root {
            --primary-color: #409eff;
            --primary-light: #66b1ff;
            --primary-dark: #337ecc;
            --danger-color: #f56c6c;
            --danger-light: #f78989;
            --success-color: #67c23a;
            --success-light: #85ce61;
            --warning-color: #e6a23c;
            --warning-light: #ebb563;
            --bg-color: #f5f7fa;
            --card-bg: #ffffff;
            --tab-active: #409eff;
            --tab-hover: #e8f4ff;
            --text-main: #333333;
            --text-secondary: #666666;
            --text-placeholder: #999999;
            --border-color: #dcdfe6;
            --border-hover: #409eff;
            --shadow: 0 2px 10px rgba(0,0,0,0.1);
            --shadow-hover: 0 4px 20px rgba(64, 158, 255, 0.15);
            --transition: all 0.3s ease;
        }

        [data-theme="dark"] {
            --primary-color: #54a0ff;
            --primary-light: #7baef7;
            --primary-dark: #2f7ed8;
            --danger-color: #f08080;
            --danger-light: #f49898;
            --success-color: #70c050;
            --success-light: #88d070;
            --warning-color: #e9b04b;
            --warning-light: #f0c078;
            --bg-color: #1a1a2e;
            --card-bg: #252540;
            --tab-active: #54a0ff;
            --tab-hover: #2f2f55;
            --text-main: #e0e0e0;
            --text-secondary: #a0a0c0;
            --text-placeholder: #707090;
            --border-color: #353555;
            --border-hover: #54a0ff;
            --shadow: 0 2px 10px rgba(0,0,0,0.3);
            --shadow-hover: 0 4px 20px rgba(84, 160, 255, 0.2);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "Microsoft Yahei", "Consolas", monospace;
        }

        body {
            background-color: var(--bg-color);
            background-image: linear-gradient(120deg, var(--bg-color), var(--bg-color) 80%, rgba(64, 158, 255, 0.05));
            padding: 20px;
            max-width: 1400px;
            margin: 0 auto;
            color: var(--text-main);
            transition: var(--transition);
            min-height: 100vh;
        }

        /* é¡¶éƒ¨æ ‡é¢˜æ  */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
            flex-wrap: wrap;
            gap: 16px;
        }

        .title {
            font-size: 28px;
            font-weight: 600;
            background: linear-gradient(90deg, var(--primary-color), var(--primary-light));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            letter-spacing: 1px;
            position: relative;
        }

        .title::after {
            content: "";
            position: absolute;
            bottom: -6px;
            left: 0;
            width: 60px;
            height: 3px;
            background: linear-gradient(90deg, var(--primary-color), transparent);
            border-radius: 3px;
        }

        .theme-switch {
            padding: 8px 16px;
            border-radius: 20px;
            background-color: var(--card-bg);
            border: 1px solid var(--border-color);
            color: var(--text-main);
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: var(--transition);
        }

        .theme-switch:hover {
            border-color: var(--border-hover);
            box-shadow: var(--shadow-hover);
        }

        /* æ ‡ç­¾é¡µæ ·å¼ */
        .tabs {
            display: flex;
            gap: 2px;
            background-color: var(--card-bg);
            border-radius: 8px 8px 0 0;
            padding: 4px;
            box-shadow: var(--shadow);
            overflow-x: auto;
            scrollbar-width: none;
        }

        .tabs::-webkit-scrollbar {
            display: none;
        }

        .tab {
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            transition: var(--transition);
            white-space: nowrap;
            font-size: 14px;
            font-weight: 500;
            color: var(--text-secondary);
        }

        .tab.active {
            background-color: var(--tab-active);
            color: white;
        }

        .tab:not(.active):hover {
            background-color: var(--tab-hover);
            color: var(--primary-color);
        }

        /* å·¥å…·å®¹å™¨ */
        .tool-container {
            background: var(--card-bg);
            padding: 24px;
            border-radius: 0 0 12px 12px;
            box-shadow: var(--shadow);
            transition: var(--transition);
            margin-bottom: 24px;
        }

        .tool-container:hover {
            box-shadow: var(--shadow-hover);
        }

        .tool-content {
            display: none;
        }

        .tool-content.active {
            display: block;
            animation: fadeIn 0.3s ease forwards;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* é€šç”¨å¡ç‰‡/è¡¨å•æ ·å¼ */
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .card-title {
            font-size: 18px;
            color: var(--primary-color);
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .char-count {
            font-size: 12px;
            color: var(--text-secondary);
        }

        .input-group {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-bottom: 16px;
        }

        .input-row {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }

        textarea, input {
            width: 100%;
            padding: 16px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            font-size: 14px;
            line-height: 1.6;
            resize: vertical;
            outline: none;
            background-color: var(--card-bg);
            color: var(--text-main);
            transition: var(--transition);
            font-family: "Consolas", monospace;
        }

        input {
            height: 48px;
            padding: 0 16px;
        }

        textarea:focus, input:focus {
            border-color: var(--border-hover);
            box-shadow: 0 0 0 2px rgba(64, 158, 255, 0.1);
        }

        textarea::placeholder, input::placeholder {
            color: var(--text-placeholder);
        }

        /* JSONè¯­æ³•é«˜äº® */
        #jsonOutput {
            white-space: pre-wrap;
            word-wrap: break-word;
            overflow-y: auto;
            height: 350px;
        }

        .json-key { color: #e57373; }
        .json-string { color: #66bb6a; }
        .json-number { color: #81c784; }
        .json-boolean { color: #4fc3f7; }
        .json-null { color: #9575cd; }

        /* æŒ‰é’®ç»„ */
        .btn-group {
            display: flex;
            gap: 12px;
            margin-top: 16px;
            flex-wrap: wrap;
        }

        button {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background-color: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--primary-light);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(64, 158, 255, 0.2);
        }

        .btn-success {
            background-color: var(--success-color);
            color: white;
        }

        .btn-success:hover {
            background-color: var(--success-light);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(103, 194, 58, 0.2);
        }

        .btn-danger {
            background-color: var(--danger-color);
            color: white;
        }

        .btn-danger:hover {
            background-color: var(--danger-light);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(245, 108, 108, 0.2);
        }

        .btn-warning {
            background-color: var(--warning-color);
            color: white;
        }

        .btn-warning:hover {
            background-color: var(--warning-light);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(230, 162, 60, 0.2);
        }

        .btn-default {
            background-color: transparent;
            color: var(--text-main);
            border: 1px solid var(--border-color);
        }

        .btn-default:hover {
            border-color: var(--border-hover);
            color: var(--primary-color);
            transform: translateY(-2px);
        }

        /* æç¤ºæ–‡æœ¬ */
        .tip {
            margin-top: 12px;
            font-size: 12px;
            color: var(--text-secondary);
            line-height: 1.5;
        }

        .error {
            color: var(--danger-color);
            font-weight: 500;
            animation: shake 0.3s ease;
        }

        .success {
            color: var(--success-color);
            font-weight: 500;
        }

        .warning {
            color: var(--warning-color);
            font-weight: 500;
        }

        /* æ‹–æ‹½æç¤º */
        .drag-over {
            border: 2px dashed var(--primary-color);
            background-color: rgba(64, 158, 255, 0.05);
        }

        /* å¤åˆ¶æˆåŠŸåŠ¨ç”» */
        @keyframes copySuccess {
            0% { transform: scale(0.8); opacity: 0; }
            50% { transform: scale(1.2); opacity: 1; }
            100% { transform: scale(1); opacity: 0; }
        }

        .copy-toast {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 16px 24px;
            border-radius: 8px;
            font-size: 16px;
            z-index: 9999;
            opacity: 0;
            pointer-events: none;
            animation: copySuccess 1s ease forwards;
        }

        /* é”™è¯¯æŠ–åŠ¨åŠ¨ç”» */
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        /* é€‚é…ç§»åŠ¨ç«¯ */
        @media (max-width: 767px) {
            .header {
                flex-direction: column;
                align-items: flex-start;
            }
            textarea {
                height: 200px !important;
            }
            .btn-group {
                justify-content: center;
            }
            button {
                flex: 1;
                justify-content: center;
            }
            .input-row {
                flex-direction: column;
            }
            .tab {
                padding: 10px 16px;
            }
        }
    </style>
</head>
<body>
    <!-- é¡¶éƒ¨æ ‡é¢˜+ä¸»é¢˜åˆ‡æ¢ -->
    <div class="header">
        <h1 class="title">âœ¨ å…¨èƒ½å‰ç«¯å·¥å…·ç®±</h1>
        <button class="theme-switch" id="themeSwitch">
            <span id="themeIcon">ğŸŒ</span>
            <span id="themeText">åˆ‡æ¢æš—é»‘æ¨¡å¼</span>
        </button>
    </div>

    <!-- å¤åˆ¶æˆåŠŸæç¤º -->
    <div class="copy-toast" id="copyToast">âœ… å¤åˆ¶æˆåŠŸï¼</div>

    <!-- å·¥å…·æ ‡ç­¾é¡µ -->
    <div class="tabs" id="toolTabs">
        <div class="tab active" data-tab="jsonTool">ğŸ“ JSONå·¥å…·</div>
        <div class="tab" data-tab="timestampTool">â° æ—¶é—´æˆ³è½¬æ¢</div>
        <div class="tab" data-tab="radixTool">ğŸ”¢ è¿›åˆ¶è½¬æ¢</div>
        <div class="tab" data-tab="caseTool">ğŸ”¤ å¤§å°å†™è½¬æ¢</div>
        <div class="tab" data-tab="urlTool">ğŸ”— URLç¼–è§£ç </div>
    </div>

    <!-- JSONå·¥å…· -->
    <div class="tool-container">
        <div class="tool-content active" id="jsonTool">
            <div class="card-header">
                <h3 class="card-title">ğŸ“¥ è¾“å…¥/ç²˜è´´JSONæ–‡æœ¬</h3>
                <span class="char-count" id="jsonInputCharCount">å­—ç¬¦æ•°ï¼š0</span>
            </div>
            <textarea 
                id="jsonInput" 
                placeholder="ç¤ºä¾‹ï¼š{&quot;name&quot;:&quot;ESA Pages&quot;,&quot;type&quot;:&quot;å‰ç«¯å·¥å…·&quot;,&quot;version&quot;:1.0,&quot;enabled&quot;:true}"
                oninput="updateJsonCharCount()"
            ></textarea>
            <div class="btn-group">
                <button class="btn-primary" onclick="formatJson()">ğŸ“ æ ¼å¼åŒ–JSON</button>
                <button class="btn-success" onclick="compressJson()">ğŸ—œï¸ å‹ç¼©JSON</button>
                <button class="btn-default" onclick="clearJsonInput()">ğŸ§¹ æ¸…ç©ºè¾“å…¥</button>
                <button class="btn-default" onclick="clearJsonAll()">ğŸ—‘ï¸ æ¸…ç©ºæ‰€æœ‰</button>
            </div>
            <div id="jsonErrorTip" class="tip"></div>
            <div class="tip">ğŸ’¡ æ”¯æŒæ‹–æ‹½JSONæ–‡ä»¶åˆ°è¾“å…¥æ¡†ç›´æ¥è§£æ</div>

            <div class="card-header" style="margin-top: 24px;">
                <h3 class="card-title">ğŸ“¤ å¤„ç†ç»“æœ</h3>
                <span class="char-count" id="jsonOutputCharCount">å­—ç¬¦æ•°ï¼š0</span>
            </div>
            <div id="jsonOutput" placeholder="æ ¼å¼åŒ–/å‹ç¼©åçš„JSONä¼šæ˜¾ç¤ºåœ¨è¿™é‡Œ..."></div>
            <div class="btn-group">
                <button class="btn-primary" onclick="copyJsonOutput()">ğŸ“‹ å¤åˆ¶ç»“æœ</button>
                <button class="btn-success" onclick="downloadJson()">ğŸ’¾ ä¸‹è½½æ–‡ä»¶</button>
                <button class="btn-default" onclick="clearJsonOutput()">ğŸ§¹ æ¸…ç©ºç»“æœ</button>
            </div>
            <div id="jsonCopyTip" class="tip"></div>
        </div>

        <!-- æ—¶é—´æˆ³è½¬æ¢å·¥å…· -->
        <div class="tool-content" id="timestampTool">
            <div class="card-header">
                <h3 class="card-title">â° æ—¶é—´æˆ³ â†” å¸¸è§„æ—¶é—´</h3>
            </div>
            <div class="input-group">
                <div class="input-row">
                    <input type="text" id="timestampInput" placeholder="è¾“å…¥æ—¶é—´æˆ³ï¼ˆæ”¯æŒç§’/æ¯«ç§’ï¼‰ï¼Œå¦‚ï¼š1736100000 æˆ– 1736100000000" oninput="convertTimestampToTime()">
                    <input type="text" id="timeInput" placeholder="è¾“å…¥æ—¶é—´ï¼ˆå¦‚ï¼š2026-01-01 12:00:00ï¼‰" oninput="convertTimeToTimestamp()">
                </div>
                <div class="btn-group">
                    <button class="btn-primary" onclick="convertTimestampToTime()">ğŸ”„ æ—¶é—´æˆ³è½¬æ—¶é—´</button>
                    <button class="btn-success" onclick="convertTimeToTimestamp()">ğŸ”„ æ—¶é—´è½¬æ—¶é—´æˆ³</button>
                    <button class="btn-default" onclick="fillCurrentTime()">ğŸ•’ å¡«å……å½“å‰æ—¶é—´</button>
                    <button class="btn-default" onclick="clearTimestampAll()">ğŸ§¹ æ¸…ç©º</button>
                </div>
            </div>
            <div id="timestampResult" class="tip success"></div>
            <div class="tip">ğŸ’¡ æ”¯æŒ10ä½ï¼ˆç§’ï¼‰/13ä½ï¼ˆæ¯«ç§’ï¼‰æ—¶é—´æˆ³ï¼Œæ—¶é—´æ ¼å¼æ”¯æŒï¼šYYYY-MM-DD HH:mm:ss</div>
        </div>

        <!-- è¿›åˆ¶è½¬æ¢å·¥å…· -->
        <div class="tool-content" id="radixTool">
            <div class="card-header">
                <h3 class="card-title">ğŸ”¢ è¿›åˆ¶è½¬æ¢ï¼ˆ2/8/10/16è¿›åˆ¶ï¼‰</h3>
            </div>
            <div class="input-group">
                <input type="text" id="radixInput" placeholder="è¾“å…¥è¦è½¬æ¢çš„æ•°å­—" oninput="convertRadix()">
                <div class="input-row">
                    <select id="fromRadix" onchange="convertRadix()">
                        <option value="10">æºè¿›åˆ¶ï¼šåè¿›åˆ¶</option>
                        <option value="2">æºè¿›åˆ¶ï¼šäºŒè¿›åˆ¶</option>
                        <option value="8">æºè¿›åˆ¶ï¼šå…«è¿›åˆ¶</option>
                        <option value="16">æºè¿›åˆ¶ï¼šåå…­è¿›åˆ¶</option>
                    </select>
                    <select id="toRadix" onchange="convertRadix()">
                        <option value="2">ç›®æ ‡è¿›åˆ¶ï¼šäºŒè¿›åˆ¶</option>
                        <option value="8">ç›®æ ‡è¿›åˆ¶ï¼šå…«è¿›åˆ¶</option>
                        <option value="10">ç›®æ ‡è¿›åˆ¶ï¼šåè¿›åˆ¶</option>
                        <option value="16">ç›®æ ‡è¿›åˆ¶ï¼šåå…­è¿›åˆ¶</option>
                    </select>
                </div>
                <div class="btn-group">
                    <button class="btn-primary" onclick="convertRadix()">ğŸ”„ æ‰§è¡Œè½¬æ¢</button>
                    <button class="btn-default" onclick="clearRadixAll()">ğŸ§¹ æ¸…ç©º</button>
                    <button class="btn-default" onclick="copyRadixResult()">ğŸ“‹ å¤åˆ¶ç»“æœ</button>
                </div>
            </div>
            <div id="radixResult" class="tip success"></div>
            <div class="tip">ğŸ’¡ åå…­è¿›åˆ¶æ”¯æŒå¤§å°å†™å­—æ¯ï¼ŒäºŒè¿›åˆ¶ä»…æ”¯æŒ0/1ï¼Œå…«è¿›åˆ¶ä»…æ”¯æŒ0-7</div>
        </div>

        <!-- å¤§å°å†™è½¬æ¢å·¥å…· -->
        <div class="tool-content" id="caseTool">
            <div class="card-header">
                <h3 class="card-title">ğŸ”¤ æ–‡æœ¬å¤§å°å†™è½¬æ¢</h3>
                <span class="char-count" id="caseInputCharCount">å­—ç¬¦æ•°ï¼š0</span>
            </div>
            <textarea id="caseInput" placeholder="è¾“å…¥è¦è½¬æ¢çš„æ–‡æœ¬" oninput="updateCaseCharCount()"></textarea>
            <div class="btn-group">
                <button class="btn-primary" onclick="toUpperCase()">ğŸ”  å…¨éƒ¨å¤§å†™</button>
                <button class="btn-success" onclick="toLowerCase()">ğŸ”¡ å…¨éƒ¨å°å†™</button>
                <button class="btn-warning" onclick="toFirstUpperCase()">ğŸ”¤ é¦–å­—æ¯å¤§å†™</button>
                <button class="btn-default" onclick="toReverseCase()">ğŸ”„ åè½¬å¤§å°å†™</button>
                <button class="btn-default" onclick="clearCaseAll()">ğŸ§¹ æ¸…ç©º</button>
            </div>
            <div class="card-header" style="margin-top: 24px;">
                <h3 class="card-title">ğŸ“¤ è½¬æ¢ç»“æœ</h3>
                <span class="char-count" id="caseOutputCharCount">å­—ç¬¦æ•°ï¼š0</span>
            </div>
            <textarea id="caseOutput" readonly placeholder="è½¬æ¢åçš„æ–‡æœ¬ä¼šæ˜¾ç¤ºåœ¨è¿™é‡Œ..."></textarea>
            <div class="btn-group">
                <button class="btn-primary" onclick="copyCaseOutput()">ğŸ“‹ å¤åˆ¶ç»“æœ</button>
            </div>
            <div id="caseTip" class="tip"></div>
        </div>

        <!-- URLç¼–è§£ç å·¥å…· -->
        <div class="tool-content" id="urlTool">
            <div class="card-header">
                <h3 class="card-title">ğŸ”— URLç¼–è§£ç </h3>
                <span class="char-count" id="urlInputCharCount">å­—ç¬¦æ•°ï¼š0</span>
            </div>
            <textarea id="urlInput" placeholder="è¾“å…¥è¦ç¼–ç /è§£ç çš„URLæˆ–æ–‡æœ¬" oninput="updateUrlCharCount()"></textarea>
            <div class="btn-group">
                <button class="btn-primary" onclick="urlEncode()">ğŸ”’ URLç¼–ç </button>
                <button class="btn-success" onclick="urlDecode()">ğŸ”“ URLè§£ç </button>
                <button class="btn-default" onclick="clearUrlAll()">ğŸ§¹ æ¸…ç©º</button>
            </div>
            <div class="card-header" style="margin-top: 24px;">
                <h3 class="card-title">ğŸ“¤ å¤„ç†ç»“æœ</h3>
                <span class="char-count" id="urlOutputCharCount">å­—ç¬¦æ•°ï¼š0</span>
            </div>
            <textarea id="urlOutput" readonly placeholder="ç¼–ç /è§£ç åçš„å†…å®¹ä¼šæ˜¾ç¤ºåœ¨è¿™é‡Œ..."></textarea>
            <div class="btn-group">
                <button class="btn-primary" onclick="copyUrlOutput()">ğŸ“‹ å¤åˆ¶ç»“æœ</button>
            </div>
            <div id="urlTip" class="tip"></div>
            <div class="tip">ğŸ’¡ ç¼–ç ä¼šå°†ç‰¹æ®Šå­—ç¬¦è½¬æ¢ä¸º%xxæ ¼å¼ï¼Œè§£ç åˆ™è¿˜åŸï¼Œé€‚ç”¨äºURLå‚æ•°å¤„ç†</div>
        </div>
    </div>

    <script>
        // å…¨å±€å˜é‡
        let currentTheme = localStorage.getItem('toolTheme') || 'light';
        const copyToast = document.getElementById('copyToast');
        
        // åˆå§‹åŒ–ä¸»é¢˜
        document.documentElement.setAttribute('data-theme', currentTheme);
        updateThemeUI();

        // ä¸»é¢˜åˆ‡æ¢
        document.getElementById('themeSwitch').addEventListener('click', () => {
            currentTheme = currentTheme === 'light' ? 'dark' : 'light';
            document.documentElement.setAttribute('data-theme', currentTheme);
            localStorage.setItem('toolTheme', currentTheme);
            updateThemeUI();
            // é‡æ–°é«˜äº®JSONå†…å®¹
            if (document.getElementById('jsonOutput').innerHTML) {
                const text = document.getElementById('jsonOutput').textContent || document.getElementById('jsonOutput').innerText;
                if (text) {
                    try {
                        JSON.parse(text);
                        document.getElementById('jsonOutput').innerHTML = syntaxHighlight(text);
                    } catch (e) {
                        document.getElementById('jsonOutput').textContent = text;
                    }
                }
            }
        });

        // æ›´æ–°ä¸»é¢˜UI
        function updateThemeUI() {
            const themeIcon = document.getElementById('themeIcon');
            const themeText = document.getElementById('themeText');
            if (currentTheme === 'dark') {
                themeIcon.textContent = 'ğŸŒ™';
                themeText.textContent = 'åˆ‡æ¢äº®è‰²æ¨¡å¼';
            } else {
                themeIcon.textContent = 'ğŸŒ';
                themeText.textContent = 'åˆ‡æ¢æš—é»‘æ¨¡å¼';
            }
        }

        // æ ‡ç­¾é¡µåˆ‡æ¢
        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', () => {
                // ç§»é™¤æ‰€æœ‰æ¿€æ´»çŠ¶æ€
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.tool-content').forEach(c => c.classList.remove('active'));
                // æ¿€æ´»å½“å‰æ ‡ç­¾
                tab.classList.add('active');
                const tabId = tab.getAttribute('data-tab');
                document.getElementById(tabId).classList.add('active');
            });
        });

        // ===================== JSONå·¥å…·åŠŸèƒ½ =====================
        function syntaxHighlight(json) {
            if (typeof json !== 'string') {
                json = JSON.stringify(json, undefined, 2);
            }
            json = json.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');
            return json.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g, function (match) {
                let cls = 'json-number';
                if (/^"/.test(match)) {
                    if (/:$/.test(match)) {
                        cls = 'json-key';
                    } else {
                        cls = 'json-string';
                    }
                } else if (/true|false/.test(match)) {
                    cls = 'json-boolean';
                } else if (/null/.test(match)) {
                    cls = 'json-null';
                }
                return `<span class="${cls}">${match}</span>`;
            });
        }

        function updateJsonCharCount() {
            const inputLen = document.getElementById('jsonInput').value.trim().length;
            document.getElementById('jsonInputCharCount').textContent = `å­—ç¬¦æ•°ï¼š${inputLen}`;
            
            const outputText = document.getElementById('jsonOutput').textContent || document.getElementById('jsonOutput').innerText;
            const outputLen = outputText.trim().length;
            document.getElementById('jsonOutputCharCount').textContent = `å­—ç¬¦æ•°ï¼š${outputLen}`;
        }

        function formatJson() {
            const input = document.getElementById('jsonInput').value.trim();
            const errorTip = document.getElementById('jsonErrorTip');
            const output = document.getElementById('jsonOutput');
            
            errorTip.textContent = '';
            errorTip.classList.remove('error');

            if (!input) {
                errorTip.textContent = 'æç¤ºï¼šè¯·è¾“å…¥JSONæ–‡æœ¬ï¼';
                output.innerHTML = '';
                updateJsonCharCount();
                return;
            }

            try {
                const parsedJson = JSON.parse(input);
                const formattedJson = JSON.stringify(parsedJson, null, 2);
                output.innerHTML = syntaxHighlight(formattedJson);
                errorTip.textContent = 'âœ… JSONæ ¼å¼æ­£ç¡®ï¼Œå·²å®Œæˆæ ¼å¼åŒ–ï¼';
                errorTip.classList.add('success');
            } catch (e) {
                const errorMsg = e.message;
                let errorPos = 'æœªçŸ¥ä½ç½®';
                const match = /position (\d+)/.exec(errorMsg);
                if (match) {
                    errorPos = `ç¬¬ ${match[1]} ä¸ªå­—ç¬¦`;
                }
                errorTip.textContent = `âŒ JSONæ ¼å¼é”™è¯¯ï¼ˆ${errorPos}ï¼‰ï¼š${errorMsg}`;
                errorTip.classList.add('error');
                output.innerHTML = '';
            }
            updateJsonCharCount();
        }

        function compressJson() {
            const input = document.getElementById('jsonInput').value.trim();
            const errorTip = document.getElementById('jsonErrorTip');
            const output = document.getElementById('jsonOutput');
            
            errorTip.textContent = '';
            errorTip.classList.remove('error');

            if (!input) {
                errorTip.textContent = 'æç¤ºï¼šè¯·è¾“å…¥JSONæ–‡æœ¬ï¼';
                output.innerHTML = '';
                updateJsonCharCount();
                return;
            }

            try {
                const parsedJson = JSON.parse(input);
                const compressedJson = JSON.stringify(parsedJson);
                output.innerHTML = syntaxHighlight(compressedJson);
                errorTip.textContent = 'âœ… JSONæ ¼å¼æ­£ç¡®ï¼Œå·²å®Œæˆå‹ç¼©ï¼';
                errorTip.classList.add('success');
            } catch (e) {
                const errorMsg = e.message;
                let errorPos = 'æœªçŸ¥ä½ç½®';
                const match = /position (\d+)/.exec(errorMsg);
                if (match) {
                    errorPos = `ç¬¬ ${match[1]} ä¸ªå­—ç¬¦`;
                }
                errorTip.textContent = `âŒ JSONæ ¼å¼é”™è¯¯ï¼ˆ${errorPos}ï¼‰ï¼š${errorMsg}`;
                errorTip.classList.add('error');
                output.innerHTML = '';
            }
            updateJsonCharCount();
        }

        function copyJsonOutput() {
            const outputText = document.getElementById('jsonOutput').textContent || document.getElementById('jsonOutput').innerText;
            copyToClipboard(outputText, document.getElementById('jsonCopyTip'));
        }

        function downloadJson() {
            const outputText = document.getElementById('jsonOutput').textContent || document.getElementById('jsonOutput').innerText;
            
            if (!outputText) {
                const tip = document.getElementById('jsonCopyTip');
                tip.textContent = 'âŒ æš‚æ— å†…å®¹å¯ä¸‹è½½ï¼';
                tip.classList.add('error');
                setTimeout(() => tip.textContent = '', 2000);
                return;
            }

            const blob = new Blob([outputText], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `json_tool_${new Date().getTime()}.json`;
            a.click();
            URL.revokeObjectURL(url);
            
            const tip = document.getElementById('jsonCopyTip');
            tip.textContent = 'âœ… æ–‡ä»¶ä¸‹è½½æˆåŠŸï¼';
            tip.classList.add('success');
            setTimeout(() => tip.textContent = '', 3000);
        }

        function clearJsonInput() {
            document.getElementById('jsonInput').value = '';
            document.getElementById('jsonErrorTip').textContent = '';
            document.getElementById('jsonErrorTip').classList.remove('error', 'success');
            updateJsonCharCount();
        }

        function clearJsonOutput() {
            document.getElementById('jsonOutput').innerHTML = '';
            document.getElementById('jsonCopyTip').textContent = '';
            document.getElementById('jsonCopyTip').classList.remove('error', 'success');
            updateJsonCharCount();
        }

        function clearJsonAll() {
            clearJsonInput();
            clearJsonOutput();
        }

        // JSONæ‹–æ‹½è§£æ
        document.getElementById('jsonInput').addEventListener('dragover', (e) => {
            e.preventDefault();
            e.target.classList.add('drag-over');
        });

        document.getElementById('jsonInput').addEventListener('dragleave', (e) => {
            e.target.classList.remove('drag-over');
        });

        document.getElementById('jsonInput').addEventListener('drop', (e) => {
            e.preventDefault();
            e.target.classList.remove('drag-over');
            
            const file = e.dataTransfer.files[0];
            if (file && file.type === 'application/json') {
                const reader = new FileReader();
                reader.onload = (event) => {
                    document.getElementById('jsonInput').value = event.target.result;
                    updateJsonCharCount();
                    formatJson();
                };
                reader.readAsText(file);
            } else {
                const errorTip = document.getElementById('jsonErrorTip');
                errorTip.textContent = 'âŒ è¯·æ‹–æ‹½JSONæ ¼å¼çš„æ–‡ä»¶ï¼';
                errorTip.classList.add('error');
                setTimeout(() => errorTip.textContent = '', 3000);
            }
        });

        // ===================== æ—¶é—´æˆ³è½¬æ¢å·¥å…· =====================
        function convertTimestampToTime() {
            const timestamp = document.getElementById('timestampInput').value.trim();
            const resultEl = document.getElementById('timestampResult');
            
            if (!timestamp) {
                resultEl.textContent = '';
                return;
            }

            try {
                let ts = Number(timestamp);
                // å¤„ç†10ä½æ—¶é—´æˆ³ï¼ˆç§’ï¼‰è½¬13ä½ï¼ˆæ¯«ç§’ï¼‰
                if (timestamp.length === 10) {
                    ts = ts * 1000;
                }
                // å¤„ç†13ä½ä»¥ä¸Šçš„æ— æ•ˆæ—¶é—´æˆ³
                if (timestamp.length > 13) {
                    throw new Error('æ—¶é—´æˆ³é•¿åº¦è¶…è¿‡13ä½ï¼ˆæœ€å¤§æ”¯æŒæ¯«ç§’çº§ï¼‰');
                }
                
                const date = new Date(ts);
                if (isNaN(date.getTime())) {
                    throw new Error('æ— æ•ˆçš„æ—¶é—´æˆ³');
                }
                
                // æ ¼å¼åŒ–æ—¶é—´
                const year = date.getFullYear();
                const month = String(date.getMonth() + 1).padStart(2, '0');
                const day = String(date.getDate()).padStart(2, '0');
                const hour = String(date.getHours()).padStart(2, '0');
                const minute = String(date.getMinutes()).padStart(2, '0');
                const second = String(date.getSeconds()).padStart(2, '0');
                
                const formattedTime = `${year}-${month}-${day} ${hour}:${minute}:${second}`;
                resultEl.textContent = `âœ… è½¬æ¢ç»“æœï¼š${formattedTime}ï¼ˆ${timestamp.length === 10 ? 'ç§’çº§' : 'æ¯«ç§’çº§'}æ—¶é—´æˆ³ï¼‰`;
                resultEl.classList.remove('error', 'warning');
                resultEl.classList.add('success');
                // å¡«å……åˆ°æ—¶é—´è¾“å…¥æ¡†
                document.getElementById('timeInput').value = formattedTime;
            } catch (e) {
                resultEl.textContent = `âŒ è½¬æ¢å¤±è´¥ï¼š${e.message}`;
                resultEl.classList.remove('success', 'warning');
                resultEl.classList.add('error');
            }
        }

        function convertTimeToTimestamp() {
            const timeStr = document.getElementById('timeInput').value.trim();
            const resultEl = document.getElementById('timestampResult');
            
            if (!timeStr) {
                resultEl.textContent = '';
                return;
            }

            try {
                // å¤„ç†å¸¸è§æ—¶é—´æ ¼å¼
                const date = new Date(timeStr);
                if (isNaN(date.getTime())) {
                    throw new Error('æ— æ•ˆçš„æ—¶é—´æ ¼å¼ï¼Œè¯·ä½¿ç”¨ï¼šYYYY-MM-DD HH:mm:ss');
                }
                
                const timestampMs = date.getTime(); // æ¯«ç§’çº§
                const timestampS = Math.floor(timestampMs / 1000); // ç§’çº§
                
                resultEl.textContent = `âœ… è½¬æ¢ç»“æœï¼šç§’çº§=${timestampS} | æ¯«ç§’çº§=${timestampMs}`;
                resultEl.classList.remove('error', 'warning');
                resultEl.classList.add('success');
                // å¡«å……åˆ°æ—¶é—´æˆ³è¾“å…¥æ¡†ï¼ˆé»˜è®¤æ¯«ç§’çº§ï¼‰
                document.getElementById('timestampInput').value = timestampMs;
            } catch (e) {
                resultEl.textContent = `âŒ è½¬æ¢å¤±è´¥ï¼š${e.message}`;
                resultEl.classList.remove('success', 'warning');
                resultEl.classList.add('error');
            }
        }

        function fillCurrentTime() {
            const now = new Date();
            const year = now.getFullYear();
            const month = String(now.getMonth() + 1).padStart(2, '0');
            const day = String(now.getDate()).padStart(2, '0');
            const hour = String(now.getHours()).padStart(2, '0');
            const minute = String(now.getMinutes()).padStart(2, '0');
            const second = String(now.getSeconds()).padStart(2, '0');
            
            const formattedTime = `${year}-${month}-${day} ${hour}:${minute}:${second}`;
            document.getElementById('timeInput').value = formattedTime;
            convertTimeToTimestamp();
        }

        function clearTimestampAll() {
            document.getElementById('timestampInput').value = '';
            document.getElementById('timeInput').value = '';
            document.getElementById('timestampResult').textContent = '';
            document.getElementById('timestampResult').classList.remove('success', 'error', 'warning');
        }

        // ===================== è¿›åˆ¶è½¬æ¢å·¥å…· =====================
        function convertRadix() {
            const input = document.getElementById('radixInput').value.trim();
            const fromRadix = Number(document.getElementById('fromRadix').value);
            const toRadix = Number(document.getElementById('toRadix').value);
            const resultEl = document.getElementById('radixResult');
            
            if (!input) {
                resultEl.textContent = '';
                return;
            }

            try {
                // è½¬æ¢ä¸ºåè¿›åˆ¶
                let decimalNum;
                if (fromRadix === 16 && input.startsWith('0x')) {
                    decimalNum = parseInt(input, 16);
                } else {
                    decimalNum = parseInt(input, fromRadix);
                }
                
                if (isNaN(decimalNum)) {
                    throw new Error(`æ— æ³•å°† "${input}" è½¬æ¢ä¸º${fromRadix}è¿›åˆ¶æ•°å­—`);
                }
                
                // è½¬æ¢ä¸ºç›®æ ‡è¿›åˆ¶
                let result;
                if (toRadix === 16) {
                    result = decimalNum.toString(16).toUpperCase();
                } else {
                    result = decimalNum.toString(toRadix);
                }
                
                resultEl.textContent = `âœ… è½¬æ¢ç»“æœï¼š${result}ï¼ˆ${toRadix}è¿›åˆ¶ï¼‰`;
                resultEl.classList.remove('error', 'warning');
                resultEl.classList.add('success');
            } catch (e) {
                resultEl.textContent = `âŒ è½¬æ¢å¤±è´¥ï¼š${e.message}`;
                resultEl.classList.remove('success', 'warning');
                resultEl.classList.add('error');
            }
        }

        function clearRadixAll() {
            document.getElementById('radixInput').value = '';
            document.getElementById('radixResult').textContent = '';
            document.getElementById('radixResult').classList.remove('success', 'error', 'warning');
        }

        function copyRadixResult() {
            const resultText = document.getElementById('radixResult').textContent;
            if (!resultText.startsWith('âœ…')) {
                const tip = document.getElementById('radixResult');
                tip.textContent = 'âŒ æš‚æ— æœ‰æ•ˆç»“æœå¯å¤åˆ¶ï¼';
                tip.classList.remove('success', 'warning');
                tip.classList.add('error');
                setTimeout(() => convertRadix(), 2000);
                return;
            }
            const result = resultText.split('ï¼š')[1].split('ï¼ˆ')[0];
            copyToClipboard(result, document.getElementById('radixResult'));
        }

        // ===================== å¤§å°å†™è½¬æ¢å·¥å…· =====================
        function updateCaseCharCount() {
            const inputLen = document.getElementById('caseInput').value.trim().length;
            document.getElementById('caseInputCharCount').textContent = `å­—ç¬¦æ•°ï¼š${inputLen}`;
            
            const outputLen = document.getElementById('caseOutput').value.trim().length;
            document.getElementById('caseOutputCharCount').textContent = `å­—ç¬¦æ•°ï¼š${outputLen}`;
        }

        function toUpperCase() {
            const input = document.getElementById('caseInput').value;
            const output = document.getElementById('caseOutput');
            output.value = input.toUpperCase();
            updateCaseCharCount();
            document.getElementById('caseTip').textContent = 'âœ… å·²è½¬æ¢ä¸ºå…¨éƒ¨å¤§å†™ï¼';
            document.getElementById('caseTip').classList.add('success');
        }

        function toLowerCase() {
            const input = document.getElementById('caseInput').value;
            const output = document.getElementById('caseOutput');
            output.value = input.toLowerCase();
            updateCaseCharCount();
            document.getElementById('caseTip').textContent = 'âœ… å·²è½¬æ¢ä¸ºå…¨éƒ¨å°å†™ï¼';
            document.getElementById('caseTip').classList.add('success');
        }

        function toFirstUpperCase() {
            const input = document.getElementById('caseInput').value;
            const output = document.getElementById('caseOutput');
            if (!input) {
                output.value = '';
                updateCaseCharCount();
                return;
            }
            // é¦–å­—æ¯å¤§å†™ï¼Œå…¶ä½™å°å†™
            const result = input.toLowerCase().replace(/^\w/, c => c.toUpperCase());
            output.value = result;
            updateCaseCharCount();
            document.getElementById('caseTip').textContent = 'âœ… å·²è½¬æ¢ä¸ºé¦–å­—æ¯å¤§å†™ï¼';
            document.getElementById('caseTip').classList.add('success');
        }

        function toReverseCase() {
            const input = document.getElementById('caseInput').value;
            const output = document.getElementById('caseOutput');
            if (!input) {
                output.value = '';
                updateCaseCharCount();
                return;
            }
            // åè½¬å¤§å°å†™
            let result = '';
            for (let i = 0; i < input.length; i++) {
                const char = input[i];
                if (char === char.toUpperCase()) {
                    result += char.toLowerCase();
                } else {
                    result += char.toUpperCase();
                }
            }
            output.value = result;
            updateCaseCharCount();
            document.getElementById('caseTip').textContent = 'âœ… å·²åè½¬å¤§å°å†™ï¼';
            document.getElementById('caseTip').classList.add('success');
        }

        function clearCaseAll() {
            document.getElementById('caseInput').value = '';
            document.getElementById('caseOutput').value = '';
            document.getElementById('caseTip').textContent = '';
            document.getElementById('caseTip').classList.remove('success', 'error');
            updateCaseCharCount();
        }

        function copyCaseOutput() {
            const outputText = document.getElementById('caseOutput').value;
            copyToClipboard(outputText, document.getElementById('caseTip'));
        }

        // ===================== URLç¼–è§£ç å·¥å…· =====================
        function updateUrlCharCount() {
            const inputLen = document.getElementById('urlInput').value.trim().length;
            document.getElementById('urlInputCharCount').textContent = `å­—ç¬¦æ•°ï¼š${inputLen}`;
            
            const outputLen = document.getElementById('urlOutput').value.trim().length;
            document.getElementById('urlOutputCharCount').textContent = `å­—ç¬¦æ•°ï¼š${outputLen}`;
        }

        function urlEncode() {
            const input = document.getElementById('urlInput').value;
            const output = document.getElementById('urlOutput');
            const tip = document.getElementById('urlTip');
            
            if (!input) {
                output.value = '';
                tip.textContent = '';
                updateUrlCharCount();
                return;
            }

            try {
                const encoded = encodeURIComponent(input);
                output.value = encoded;
                tip.textContent = 'âœ… URLç¼–ç æˆåŠŸï¼';
                tip.classList.add('success');
                tip.classList.remove('error');
            } catch (e) {
                tip.textContent = `âŒ ç¼–ç å¤±è´¥ï¼š${e.message}`;
                tip.classList.add('error');
                tip.classList.remove('success');
            }
            updateUrlCharCount();
        }

        function urlDecode() {
            const input = document.getElementById('urlInput').value;
            const output = document.getElementById('urlOutput');
            const tip = document.getElementById('urlTip');
            
            if (!input) {
                output.value = '';
                tip.textContent = '';
                updateUrlCharCount();
                return;
            }

            try {
                const decoded = decodeURIComponent(input);
                output.value = decoded;
                tip.textContent = 'âœ… URLè§£ç æˆåŠŸï¼';
                tip.classList.add('success');
                tip.classList.remove('error');
            } catch (e) {
                tip.textContent = `âŒ è§£ç å¤±è´¥ï¼š${e.message}ï¼ˆè¯·æ£€æŸ¥ç¼–ç æ ¼å¼ï¼‰`;
                tip.classList.add('error');
                tip.classList.remove('success');
            }
            updateUrlCharCount();
        }

        function clearUrlAll() {
            document.getElementById('urlInput').value = '';
            document.getElementById('urlOutput').value = '';
            document.getElementById('urlTip').textContent = '';
            document.getElementById('urlTip').classList.remove('success', 'error');
            updateUrlCharCount();
        }

        function copyUrlOutput() {
            const outputText = document.getElementById('urlOutput').value;
            copyToClipboard(outputText, document.getElementById('urlTip'));
        }

        // ===================== é€šç”¨å·¥å…·å‡½æ•° =====================
        function copyToClipboard(text, tipEl) {
            if (!text) {
                tipEl.textContent = 'âŒ æš‚æ— å†…å®¹å¯å¤åˆ¶ï¼';
                tipEl.classList.add('error');
                tipEl.classList.remove('success');
                setTimeout(() => tipEl.textContent = '', 2000);
                return;
            }

            navigator.clipboard.writeText(text).then(() => {
                // æ˜¾ç¤ºåŠ¨ç”»æç¤º
                copyToast.style.animation = 'none';
                copyToast.offsetHeight; // è§¦å‘é‡ç»˜
                copyToast.style.animation = 'copySuccess 1s ease forwards';
                tipEl.textContent = '';
            }).catch(() => {
                // å…¼å®¹ä½ç‰ˆæœ¬æµè§ˆå™¨
                const textArea = document.createElement('textarea');
                textArea.value = text;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                copyToast.style.animation = 'none';
                copyToast.offsetHeight;
                copyToast.style.animation = 'copySuccess 1s ease forwards';
                tipEl.textContent = '';
            });
        }

        // é¡µé¢åŠ è½½åˆå§‹åŒ–
        window.onload = function() {
            // åˆå§‹åŒ–JSONå·¥å…·ç¤ºä¾‹
            const exampleJson = {
                "name": "ESA Pages å…¨èƒ½å·¥å…·ç®±",
                "author": "å‚èµ›ä½œå“",
                "tools": ["JSONå·¥å…·", "æ—¶é—´æˆ³è½¬æ¢", "è¿›åˆ¶è½¬æ¢", "å¤§å°å†™è½¬æ¢", "URLç¼–è§£ç "],
                "version": "3.0.0",
                "enabled": true,
                "updateTime": new Date().toLocaleString()
            };
            document.getElementById('jsonInput').value = JSON.stringify(exampleJson);
            updateJsonCharCount();
            formatJson();
            
            // åˆå§‹åŒ–å­—ç¬¦è®¡æ•°
            updateCaseCharCount();
            updateUrlCharCount();
        };
    </script>
</body>
</html>