<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>âœ¨ å…¨èƒ½å‰ç«¯å·¥å…·ç®±</title>
    <style>
        /* å…¨å±€CSSå˜é‡ - ä¸»é¢˜ç³»ç»Ÿæ ¸å¿ƒ */
        :root {
            --primary-color: #409eff;
            --primary-light: #66b1ff;
            --primary-dark: #337ecc;
            --danger-color: #f56c6c;
            --danger-light: #f78989;
            --success-color: #67c23a;
            --success-light: #85ce61;
            --warning-color: #e6a23c;
            --warning-light: #ebb563;
            --bg-color: #f5f7fa;
            --card-bg: #ffffff;
            --tab-active: #409eff;
            --tab-hover: #e8f4ff;
            --text-main: #333333;
            --text-secondary: #666666;
            --text-placeholder: #999999;
            --border-color: #dcdfe6;
            --border-hover: #409eff;
            --shadow: 0 2px 10px rgba(0,0,0,0.1);
            --shadow-hover: 0 4px 20px rgba(64, 158, 255, 0.15);
            --transition: all 0.3s ease;
        }

        [data-theme="dark"] {
            --primary-color: #54a0ff;
            --primary-light: #7baef7;
            --primary-dark: #2f7ed8;
            --danger-color: #f08080;
            --danger-light: #f49898;
            --success-color: #70c050;
            --success-light: #88d070;
            --warning-color: #e9b04b;
            --warning-light: #f0c078;
            --bg-color: #1a1a2e;
            --card-bg: #252540;
            --tab-active: #54a0ff;
            --tab-hover: #2f2f55;
            --text-main: #e0e0e0;
            --text-secondary: #a0a0c0;
            --text-placeholder: #707090;
            --border-color: #353555;
            --border-hover: #54a0ff;
            --shadow: 0 2px 10px rgba(0,0,0,0.3);
            --shadow-hover: 0 4px 20px rgba(84, 160, 255, 0.2);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "Microsoft Yahei", "Consolas", monospace;
        }

        body {
            background-color: var(--bg-color);
            background-image: linear-gradient(120deg, var(--bg-color), var(--bg-color) 80%, rgba(64, 158, 255, 0.05));
            padding: 20px;
            max-width: 1400px;
            margin: 0 auto;
            color: var(--text-main);
            transition: var(--transition);
            min-height: 100vh;
        }

        /* é¡¶éƒ¨æ ‡é¢˜æ  */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
            flex-wrap: wrap;
            gap: 16px;
        }

        .title {
            font-size: 28px;
            font-weight: 600;
            background: linear-gradient(90deg, var(--primary-color), var(--primary-light));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            letter-spacing: 1px;
            position: relative;
        }

        .title::after {
            content: "";
            position: absolute;
            bottom: -6px;
            left: 0;
            width: 60px;
            height: 3px;
            background: linear-gradient(90deg, var(--primary-color), transparent);
            border-radius: 3px;
        }

        .theme-switch {
            padding: 8px 16px;
            border-radius: 20px;
            background-color: var(--card-bg);
            border: 1px solid var(--border-color);
            color: var(--text-main);
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: var(--transition);
        }

        .theme-switch:hover {
            border-color: var(--border-hover);
            box-shadow: var(--shadow-hover);
        }

        /* æ ‡ç­¾é¡µå®¹å™¨ - åˆ†å¤§ç±»æ ‡ç­¾ */
        .main-tabs {
            display: flex;
            gap: 4px;
            margin-bottom: 8px;
            flex-wrap: wrap;
        }

        .main-tab {
            padding: 8px 20px;
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
            background-color: var(--card-bg);
            border: 1px solid var(--border-color);
            color: var(--text-secondary);
            font-weight: 500;
        }

        .main-tab.active {
            background-color: var(--tab-active);
            color: white;
            border-color: var(--tab-active);
        }

        .main-tab:not(.active):hover {
            border-color: var(--border-hover);
            color: var(--primary-color);
        }

        /* å­æ ‡ç­¾é¡µæ ·å¼ */
        .sub-tabs {
            display: flex;
            gap: 2px;
            background-color: var(--card-bg);
            border-radius: 8px 8px 0 0;
            padding: 4px;
            box-shadow: var(--shadow);
            overflow-x: auto;
            scrollbar-width: none;
        }

        .sub-tabs::-webkit-scrollbar {
            display: none;
        }

        .sub-tab {
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            transition: var(--transition);
            white-space: nowrap;
            font-size: 14px;
            font-weight: 500;
            color: var(--text-secondary);
        }

        .sub-tab.active {
            background-color: var(--tab-active);
            color: white;
        }

        .sub-tab:not(.active):hover {
            background-color: var(--tab-hover);
            color: var(--primary-color);
        }

        /* å·¥å…·å®¹å™¨ */
        .tool-container {
            background: var(--card-bg);
            padding: 24px;
            border-radius: 0 0 12px 12px;
            box-shadow: var(--shadow);
            transition: var(--transition);
            margin-bottom: 24px;
        }

        .tool-container:hover {
            box-shadow: var(--shadow-hover);
        }

        .tool-content {
            display: none;
        }

        .tool-content.active {
            display: block;
            animation: fadeIn 0.3s ease forwards;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* é€šç”¨å¡ç‰‡/è¡¨å•æ ·å¼ */
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .card-title {
            font-size: 18px;
            color: var(--primary-color);
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .char-count {
            font-size: 12px;
            color: var(--text-secondary);
        }

        .stat-item {
            display: inline-block;
            margin-right: 16px;
            padding: 4px 8px;
            background-color: rgba(64, 158, 255, 0.1);
            border-radius: 4px;
            font-size: 12px;
        }

        .input-group {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-bottom: 16px;
        }

        .input-row {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }

        .checkbox-group {
            display: flex;
            gap: 16px;
            flex-wrap: wrap;
            margin: 8px 0;
            align-items: center;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        textarea, input, select {
            width: 100%;
            padding: 16px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            font-size: 14px;
            line-height: 1.6;
            resize: vertical;
            outline: none;
            background-color: var(--card-bg);
            color: var(--text-main);
            transition: var(--transition);
            font-family: "Consolas", monospace;
        }

        input, select {
            height: 48px;
            padding: 0 16px;
        }

        select {
            cursor: pointer;
        }

        textarea:focus, input:focus, select:focus {
            border-color: var(--border-hover);
            box-shadow: 0 0 0 2px rgba(64, 158, 255, 0.1);
        }

        textarea::placeholder, input::placeholder {
            color: var(--text-placeholder);
        }

        /* äºŒç»´ç å®¹å™¨ */
        .qrcode-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 16px;
            margin: 16px 0;
            padding: 20px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            background-color: rgba(255,255,255,0.05);
        }

        #qrcode {
            padding: 10px;
            background-color: white;
            border-radius: 8px;
            box-shadow: var(--shadow);
        }

        /* é¢œè‰²é¢„è§ˆ */
        .color-preview {
            width: 60px;
            height: 48px;
            border-radius: 8px;
            border: 1px solid var(--border-color);
            cursor: pointer;
            transition: var(--transition);
        }

        .color-preview:hover {
            transform: scale(1.05);
            box-shadow: var(--shadow-hover);
        }

        /* æ­£åˆ™æµ‹è¯•ç»“æœ */
        .regex-result {
            margin: 16px 0;
            padding: 16px;
            border-radius: 8px;
            border: 1px solid var(--border-color);
            max-height: 200px;
            overflow-y: auto;
        }

        .match-item {
            padding: 4px 0;
            border-bottom: 1px dashed var(--border-color);
        }

        .match-text {
            color: var(--success-color);
            font-weight: 600;
        }

        /* æŒ‰é’®ç»„ */
        .btn-group {
            display: flex;
            gap: 12px;
            margin-top: 16px;
            flex-wrap: wrap;
        }

        button {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background-color: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--primary-light);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(64, 158, 255, 0.2);
        }

        .btn-success {
            background-color: var(--success-color);
            color: white;
        }

        .btn-success:hover {
            background-color: var(--success-light);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(103, 194, 58, 0.2);
        }

        .btn-danger {
            background-color: var(--danger-color);
            color: white;
        }

        .btn-danger:hover {
            background-color: var(--danger-light);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(245, 108, 108, 0.2);
        }

        .btn-default {
            background-color: transparent;
            color: var(--text-main);
            border: 1px solid var(--border-color);
        }

        .btn-default:hover {
            border-color: var(--border-hover);
            color: var(--primary-color);
            transform: translateY(-2px);
        }

        /* æç¤ºæ–‡æœ¬ */
        .tip {
            margin-top: 12px;
            font-size: 12px;
            color: var(--text-secondary);
            line-height: 1.5;
        }

        .error {
            color: var(--danger-color);
            font-weight: 500;
            animation: shake 0.3s ease;
        }

        .success {
            color: var(--success-color);
            font-weight: 500;
        }

        /* å¤åˆ¶æˆåŠŸåŠ¨ç”» */
        @keyframes copySuccess {
            0% { transform: scale(0.8); opacity: 0; }
            50% { transform: scale(1.2); opacity: 1; }
            100% { transform: scale(1); opacity: 0; }
        }

        .copy-toast {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 16px 24px;
            border-radius: 8px;
            font-size: 16px;
            z-index: 9999;
            opacity: 0;
            pointer-events: none;
            animation: copySuccess 1s ease forwards;
        }

        /* é”™è¯¯æŠ–åŠ¨åŠ¨ç”» */
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        /* é€‚é…ç§»åŠ¨ç«¯ */
        @media (max-width: 767px) {
            .header {
                flex-direction: column;
                align-items: flex-start;
            }
            textarea {
                height: 200px !important;
            }
            .btn-group {
                justify-content: center;
            }
            button {
                flex: 1;
                justify-content: center;
            }
            .input-row, .checkbox-group {
                flex-direction: column;
                align-items: flex-start !important;
            }
            .sub-tab {
                padding: 10px 16px;
            }
            .stat-item {
                display: block;
                margin-bottom: 8px;
            }
            .qrcode-container {
                padding: 10px;
            }
            #qrcode {
                transform: scale(0.8);
            }
        }
    </style>
    <!-- å¼•å…¥ç¬¬ä¸‰æ–¹åº“ -->
    <script src="https://cdn.bootcdn.net/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <script src="https://cdn.bootcdn.net/ajax/libs/blueimp-md5/2.19.0/js/md5.min.js"></script>
</head>
<body>
    <!-- é¡¶éƒ¨æ ‡é¢˜+ä¸»é¢˜åˆ‡æ¢ -->
    <div class="header">
        <h1 class="title">âœ¨ å…¨èƒ½å‰ç«¯å·¥å…·ç®±</h1>
        <button class="theme-switch" id="themeSwitch">
            <span id="themeIcon">ğŸŒ</span>
            <span id="themeText">åˆ‡æ¢æš—é»‘æ¨¡å¼</span>
        </button>
    </div>

    <!-- å¤åˆ¶æˆåŠŸæç¤º -->
    <div class="copy-toast" id="copyToast">âœ… å¤åˆ¶æˆåŠŸï¼</div>

    <!-- ä¸»åˆ†ç±»æ ‡ç­¾ -->
    <div class="main-tabs" id="mainTabs">
        <div class="main-tab active" data-category="core">ğŸ—ï¸ æ ¸å¿ƒåŸºç¡€å·¥å…·</div>
        <div class="main-tab" data-category="text">ğŸ“ æ–‡æœ¬æ‰©å±•å·¥å…·</div>
        <div class="main-tab" data-category="feature">ğŸŒŸ ç‰¹è‰²åŠŸèƒ½å·¥å…·</div>
    </div>

    <!-- æ ¸å¿ƒå·¥å…·å­æ ‡ç­¾ -->
    <div class="sub-tabs" id="coreSubTabs">
        <div class="sub-tab active" data-tab="jsonTool">ğŸ“„ JSONå·¥å…·</div>
        <div class="sub-tab" data-tab="timeTool">â° æ—¶é—´æˆ³è½¬æ¢</div>
        <div class="sub-tab" data-tab="radixTool">ğŸ”¢ è¿›åˆ¶è½¬æ¢</div>
    </div>

    <!-- æ–‡æœ¬å·¥å…·å­æ ‡ç­¾ -->
    <div class="sub-tabs" id="textSubTabs" style="display: none;">
        <div class="sub-tab active" data-tab="caseTool">ğŸ”¤ å¤§å°å†™è½¬æ¢</div>
        <div class="sub-tab" data-tab="urlTool">ğŸ”— URLç¼–è§£ç </div>
        <div class="sub-tab" data-tab="textTool">ğŸ“œ æ–‡æœ¬å¤„ç†</div>
        <div class="sub-tab" data-tab="passwordTool">ğŸ” å¯†ç ç”Ÿæˆ</div>
        <div class="sub-tab" data-tab="countTool">ğŸ“Š å­—æ•°ç»Ÿè®¡</div>
    </div>

    <!-- ç‰¹è‰²å·¥å…·å­æ ‡ç­¾ -->
    <div class="sub-tabs" id="featureSubTabs" style="display: none;">
        <div class="sub-tab active" data-tab="qrcodeTool">ğŸ“± äºŒç»´ç ç”Ÿæˆ</div>
        <div class="sub-tab" data-tab="colorTool">ğŸ¨ é¢œè‰²è½¬æ¢</div>
        <div class="sub-tab" data-tab="unitTool">ğŸ“ å•ä½æ¢ç®—</div>
        <div class="sub-tab" data-tab="md5Tool">ğŸ”’ MD5åŠ å¯†</div>
        <div class="sub-tab" data-tab="regexTool">ğŸ§µ æ­£åˆ™æµ‹è¯•</div>
    </div>

    <!-- å·¥å…·å®¹å™¨ -->
    <div class="tool-container">
        <!-- ========== æ ¸å¿ƒåŸºç¡€å·¥å…· ========== -->
        <!-- JSONå·¥å…· -->
        <div class="tool-content active" id="jsonTool">
            <div class="card-header">
                <h3 class="card-title">ğŸ“„ JSONæ ¼å¼åŒ–/å‹ç¼©</h3>
                <span class="char-count" id="jsonInputCharCount">å­—ç¬¦æ•°ï¼š0</span>
            </div>
            <textarea id="jsonInput" placeholder="è¾“å…¥JSONæ–‡æœ¬æˆ–ç²˜è´´JSONå­—ç¬¦ä¸²" rows="8" oninput="updateJsonCharCount()"></textarea>
            <div class="btn-group">
                <button class="btn-primary" onclick="formatJson()">ğŸ“ æ ¼å¼åŒ–JSON</button>
                <button class="btn-success" onclick="compressJson()">ğŸ—œï¸ å‹ç¼©JSON</button>
                <button class="btn-danger" onclick="validateJson()">âœ… éªŒè¯JSON</button>
                <button class="btn-default" onclick="clearJsonAll()">ğŸ§¹ æ¸…ç©º</button>
            </div>
            <div class="card-header" style="margin-top: 24px;">
                <h3 class="card-title">ğŸ“¤ å¤„ç†ç»“æœ</h3>
                <span class="char-count" id="jsonOutputCharCount">å­—ç¬¦æ•°ï¼š0</span>
            </div>
            <textarea id="jsonOutput" readonly placeholder="å¤„ç†åçš„JSONä¼šæ˜¾ç¤ºåœ¨è¿™é‡Œ..."></textarea>
            <div class="btn-group">
                <button class="btn-primary" onclick="copyJsonOutput()">ğŸ“‹ å¤åˆ¶ç»“æœ</button>
            </div>
            <div id="jsonTip" class="tip"></div>
        </div>

        <!-- æ—¶é—´æˆ³è½¬æ¢å·¥å…· -->
        <div class="tool-content" id="timeTool">
            <div class="card-header">
                <h3 class="card-title">â° æ—¶é—´æˆ³è½¬æ¢</h3>
            </div>
            <div class="input-group">
                <div class="input-row">
                    <input type="number" id="timestampInput" placeholder="è¾“å…¥æ—¶é—´æˆ³ï¼ˆç§’/æ¯«ç§’ï¼‰" oninput="convertTimestamp()">
                    <select id="timestampType">
                        <option value="ms" selected>æ¯«ç§’çº§ï¼ˆ13ä½ï¼‰</option>
                        <option value="s">ç§’çº§ï¼ˆ10ä½ï¼‰</option>
                    </select>
                </div>
                <button class="btn-primary" onclick="getCurrentTimestamp()">ğŸŒ€ è·å–å½“å‰æ—¶é—´æˆ³</button>
            </div>
            <div class="card-header" style="margin-top: 24px;">
                <h3 class="card-title">ğŸ“¤ è½¬æ¢ç»“æœ</h3>
            </div>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 12px;">
                <input type="text" id="datetimeOutput" readonly placeholder="YYYY-MM-DD HH:mm:ss">
                <input type="text" id="dateOutput" readonly placeholder="YYYY-MM-DD">
                <input type="text" id="timeOutput" readonly placeholder="HH:mm:ss">
                <input type="text" id="weekOutput" readonly placeholder="æ˜ŸæœŸX">
            </div>
            <div class="btn-group" style="margin-top: 12px;">
                <button class="btn-default" onclick="copyTimestampResult('datetimeOutput')">ğŸ“‹ å¤åˆ¶å®Œæ•´æ—¶é—´</button>
                <button class="btn-default" onclick="clearTimeAll()">ğŸ§¹ æ¸…ç©º</button>
            </div>
            <div id="timeTip" class="tip"></div>
        </div>

        <!-- è¿›åˆ¶è½¬æ¢å·¥å…· -->
        <div class="tool-content" id="radixTool">
            <div class="card-header">
                <h3 class="card-title">ğŸ”¢ è¿›åˆ¶è½¬æ¢</h3>
            </div>
            <div class="input-group">
                <div class="input-row">
                    <input type="text" id="radixInput" placeholder="è¾“å…¥è¦è½¬æ¢çš„æ•°å€¼" oninput="convertRadix()">
                    <select id="fromRadix">
                        <option value="10" selected>åè¿›åˆ¶</option>
                        <option value="2">äºŒè¿›åˆ¶</option>
                        <option value="8">å…«è¿›åˆ¶</option>
                        <option value="16">åå…­è¿›åˆ¶</option>
                    </select>
                    <select id="toRadix">
                        <option value="2">äºŒè¿›åˆ¶</option>
                        <option value="8">å…«è¿›åˆ¶</option>
                        <option value="10">åè¿›åˆ¶</option>
                        <option value="16" selected>åå…­è¿›åˆ¶</option>
                    </select>
                </div>
            </div>
            <div class="card-header" style="margin-top: 16px;">
                <h3 class="card-title">ğŸ“¤ è½¬æ¢ç»“æœ</h3>
            </div>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 12px;">
                <input type="text" id="binaryOutput" readonly placeholder="äºŒè¿›åˆ¶">
                <input type="text" id="octalOutput" readonly placeholder="å…«è¿›åˆ¶">
                <input type="text" id="decimalOutput" readonly placeholder="åè¿›åˆ¶">
                <input type="text" id="hexOutput" readonly placeholder="åå…­è¿›åˆ¶">
            </div>
            <div class="btn-group" style="margin-top: 12px;">
                <button class="btn-primary" onclick="convertRadix()">ğŸ”„ æ‰‹åŠ¨è½¬æ¢</button>
                <button class="btn-default" onclick="swapRadix()">ğŸ”„ äº’æ¢è¿›åˆ¶</button>
                <button class="btn-default" onclick="clearRadixAll()">ğŸ§¹ æ¸…ç©º</button>
            </div>
            <div id="radixTip" class="tip"></div>
        </div>

        <!-- ========== æ–‡æœ¬æ‰©å±•å·¥å…· ========== -->
        <!-- å¤§å°å†™è½¬æ¢å·¥å…· -->
        <div class="tool-content" id="caseTool">
            <div class="card-header">
                <h3 class="card-title">ğŸ”¤ æ–‡æœ¬å¤§å°å†™è½¬æ¢</h3>
                <span class="char-count" id="caseInputCharCount">å­—ç¬¦æ•°ï¼š0</span>
            </div>
            <textarea id="caseInput" placeholder="è¾“å…¥è¦è½¬æ¢çš„æ–‡æœ¬" oninput="updateCaseCharCount()"></textarea>
            <div class="btn-group">
                <button class="btn-primary" onclick="toUpperCase()">ğŸ”  å…¨éƒ¨å¤§å†™</button>
                <button class="btn-success" onclick="toLowerCase()">ğŸ”¡ å…¨éƒ¨å°å†™</button>
                <button class="btn-warning" onclick="toFirstUpperCase()">ğŸ”¤ é¦–å­—æ¯å¤§å†™</button>
                <button class="btn-default" onclick="toReverseCase()">ğŸ”„ åè½¬å¤§å°å†™</button>
                <button class="btn-default" onclick="clearCaseAll()">ğŸ§¹ æ¸…ç©º</button>
            </div>
            <div class="card-header" style="margin-top: 24px;">
                <h3 class="card-title">ğŸ“¤ è½¬æ¢ç»“æœ</h3>
                <span class="char-count" id="caseOutputCharCount">å­—ç¬¦æ•°ï¼š0</span>
            </div>
            <textarea id="caseOutput" readonly placeholder="è½¬æ¢åçš„æ–‡æœ¬ä¼šæ˜¾ç¤ºåœ¨è¿™é‡Œ..."></textarea>
            <div class="btn-group">
                <button class="btn-primary" onclick="copyCaseOutput()">ğŸ“‹ å¤åˆ¶ç»“æœ</button>
            </div>
            <div id="caseTip" class="tip"></div>
        </div>

        <!-- URLç¼–è§£ç å·¥å…· -->
        <div class="tool-content" id="urlTool">
            <div class="card-header">
                <h3 class="card-title">ğŸ”— URLç¼–è§£ç </h3>
                <span class="char-count" id="urlInputCharCount">å­—ç¬¦æ•°ï¼š0</span>
            </div>
            <textarea id="urlInput" placeholder="è¾“å…¥è¦ç¼–ç /è§£ç çš„URLæˆ–æ–‡æœ¬" oninput="updateUrlCharCount()"></textarea>
            <div class="btn-group">
                <button class="btn-primary" onclick="urlEncode()">ğŸ”’ URLç¼–ç </button>
                <button class="btn-success" onclick="urlDecode()">ğŸ”“ URLè§£ç </button>
                <button class="btn-default" onclick="clearUrlAll()">ğŸ§¹ æ¸…ç©º</button>
            </div>
            <div class="card-header" style="margin-top: 24px;">
                <h3 class="card-title">ğŸ“¤ å¤„ç†ç»“æœ</h3>
                <span class="char-count" id="urlOutputCharCount">å­—ç¬¦æ•°ï¼š0</span>
            </div>
            <textarea id="urlOutput" readonly placeholder="ç¼–ç /è§£ç åçš„å†…å®¹ä¼šæ˜¾ç¤ºåœ¨è¿™é‡Œ..."></textarea>
            <div class="btn-group">
                <button class="btn-primary" onclick="copyUrlOutput()">ğŸ“‹ å¤åˆ¶ç»“æœ</button>
            </div>
            <div id="urlTip" class="tip"></div>
            <div class="tip">ğŸ’¡ ç¼–ç ä¼šå°†ç‰¹æ®Šå­—ç¬¦è½¬æ¢ä¸º%xxæ ¼å¼ï¼Œè§£ç åˆ™è¿˜åŸï¼Œé€‚ç”¨äºURLå‚æ•°å¤„ç†</div>
        </div>

        <!-- æ–‡æœ¬å¤„ç†å·¥å…· -->
        <div class="tool-content" id="textTool">
            <div class="card-header">
                <h3 class="card-title">ğŸ“œ æ–‡æœ¬å»é‡/å»ç©ºæ ¼</h3>
                <span class="char-count" id="textInputCharCount">å­—ç¬¦æ•°ï¼š0</span>
            </div>
            <textarea id="textInput" placeholder="è¾“å…¥è¦å¤„ç†çš„æ–‡æœ¬" oninput="updateTextCharCount()"></textarea>
            <div class="checkbox-group">
                <div class="checkbox-item">
                    <input type="radio" name="deduplicateType" id="lineDedup" checked>
                    <label for="lineDedup">æŒ‰è¡Œå»é‡</label>
                </div>
                <div class="checkbox-item">
                    <input type="radio" name="deduplicateType" id="globalDedup">
                    <label for="globalDedup">å…¨å±€å»é‡ï¼ˆå­—ç¬¦ï¼‰</label>
                </div>
            </div>
            <div class="checkbox-group">
                <div class="checkbox-item">
                    <input type="checkbox" id="trimSpace" checked>
                    <label for="trimSpace">å»é™¤é¦–å°¾ç©ºæ ¼</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="removeAllSpace">
                    <label for="removeAllSpace">å»é™¤æ‰€æœ‰ç©ºæ ¼</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="removeLineBreak">
                    <label for="removeLineBreak">å»é™¤æ¢è¡Œç¬¦</label>
                </div>
            </div>
            <div class="btn-group">
                <button class="btn-primary" onclick="textDeduplicate()">ğŸ”„ æ–‡æœ¬å»é‡</button>
                <button class="btn-success" onclick="textRemoveSpace()">ğŸ§¹ å»é™¤ç©ºæ ¼/æ¢è¡Œ</button>
                <button class="btn-default" onclick="clearTextAll()">ğŸ§¹ æ¸…ç©º</button>
            </div>
            <div class="card-header" style="margin-top: 24px;">
                <h3 class="card-title">ğŸ“¤ å¤„ç†ç»“æœ</h3>
                <span class="char-count" id="textOutputCharCount">å­—ç¬¦æ•°ï¼š0</span>
            </div>
            <textarea id="textOutput" readonly placeholder="å¤„ç†åçš„æ–‡æœ¬ä¼šæ˜¾ç¤ºåœ¨è¿™é‡Œ..."></textarea>
            <div class="btn-group">
                <button class="btn-primary" onclick="copyTextOutput()">ğŸ“‹ å¤åˆ¶ç»“æœ</button>
            </div>
            <div id="textTip" class="tip"></div>
        </div>

        <!-- å¯†ç ç”Ÿæˆå·¥å…· -->
        <div class="tool-content" id="passwordTool">
            <div class="card-header">
                <h3 class="card-title">ğŸ” éšæœºå¯†ç ç”Ÿæˆ</h3>
            </div>
            <div class="input-group">
                <div class="input-row">
                    <input type="number" id="passwordLength" placeholder="å¯†ç é•¿åº¦ï¼ˆé»˜è®¤16ï¼‰" value="16" min="6" max="32">
                </div>
                <div class="checkbox-group">
                    <div class="checkbox-item">
                        <input type="checkbox" id="includeUpper" checked>
                        <label for="includeUpper">åŒ…å«å¤§å†™å­—æ¯ï¼ˆA-Zï¼‰</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="includeLower" checked>
                        <label for="includeLower">åŒ…å«å°å†™å­—æ¯ï¼ˆa-zï¼‰</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="includeNumber" checked>
                        <label for="includeNumber">åŒ…å«æ•°å­—ï¼ˆ0-9ï¼‰</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="includeSymbol">
                        <label for="includeSymbol">åŒ…å«ç‰¹æ®Šå­—ç¬¦ï¼ˆ!@#$%^&*ï¼‰</label>
                    </div>
                </div>
                <div class="btn-group">
                    <button class="btn-primary" onclick="generatePassword()">ğŸ”„ ç”Ÿæˆå¯†ç </button>
                    <button class="btn-default" onclick="copyPassword()">ğŸ“‹ å¤åˆ¶å¯†ç </button>
                    <button class="btn-default" onclick="clearPasswordAll()">ğŸ§¹ æ¸…ç©º</button>
                </div>
            </div>
            <input type="text" id="passwordOutput" readonly placeholder="ç”Ÿæˆçš„å¯†ç ä¼šæ˜¾ç¤ºåœ¨è¿™é‡Œ...">
            <div id="passwordTip" class="tip"></div>
            <div class="tip">ğŸ’¡ å»ºè®®å¯†ç é•¿åº¦â‰¥8ä½ï¼ŒåŒ…å«å¤šç§å­—ç¬¦ç±»å‹æå‡å®‰å…¨æ€§</div>
        </div>

        <!-- å­—æ•°ç»Ÿè®¡å·¥å…· -->
        <div class="tool-content" id="countTool">
            <div class="card-header">
                <h3 class="card-title">ğŸ“Š è¯¦ç»†å­—æ•°ç»Ÿè®¡</h3>
            </div>
            <textarea id="countInput" placeholder="è¾“å…¥è¦ç»Ÿè®¡çš„æ–‡æœ¬" oninput="countText()"></textarea>
            <div style="margin: 16px 0;">
                <span class="stat-item">æ€»å­—ç¬¦æ•°ï¼ˆå«ç©ºæ ¼/æ¢è¡Œï¼‰ï¼š<span id="totalChars">0</span></span>
                <span class="stat-item">çº¯å­—ç¬¦æ•°ï¼ˆä¸å«ç©ºæ ¼/æ¢è¡Œï¼‰ï¼š<span id="pureChars">0</span></span>
                <span class="stat-item">å•è¯æ•°ï¼š<span id="wordCount">0</span></span>
                <span class="stat-item">è¡Œæ•°ï¼š<span id="lineCount">0</span></span>
                <span class="stat-item">ä¸­æ–‡æ•°ï¼š<span id="cnCount">0</span></span>
            </div>
            <div class="btn-group">
                <button class="btn-default" onclick="clearCountAll()">ğŸ§¹ æ¸…ç©º</button>
            </div>
            <div class="tip">ğŸ’¡ å•è¯æ•°æŒ‰ç©ºæ ¼/æ ‡ç‚¹åˆ†éš”ç»Ÿè®¡ï¼Œä¸­æ–‡æŒ‰å•ä¸ªå­—ç¬¦ç»Ÿè®¡</div>
        </div>

        <!-- ========== ç‰¹è‰²åŠŸèƒ½å·¥å…· ========== -->
        <!-- äºŒç»´ç ç”Ÿæˆå·¥å…· -->
        <div class="tool-content" id="qrcodeTool">
            <div class="card-header">
                <h3 class="card-title">ğŸ“± äºŒç»´ç ç”Ÿæˆ</h3>
            </div>
            <div class="input-group">
                <textarea id="qrcodeInput" placeholder="è¾“å…¥è¦ç”ŸæˆäºŒç»´ç çš„å†…å®¹ï¼ˆç½‘å€ã€æ–‡æœ¬ã€æ‰‹æœºå·ç­‰ï¼‰" rows="4"></textarea>
                <div class="input-row">
                    <select id="qrcodeSize">
                        <option value="128">å°ºå¯¸ï¼š128px</option>
                        <option value="256" selected>å°ºå¯¸ï¼š256px</option>
                        <option value="384">å°ºå¯¸ï¼š384px</option>
                        <option value="512">å°ºå¯¸ï¼š512px</option>
                    </select>
                    <select id="qrcodeLevel">
                        <option value="L" selected>å®¹é”™çº§åˆ«ï¼šLï¼ˆ7%ï¼‰</option>
                        <option value="M">å®¹é”™çº§åˆ«ï¼šMï¼ˆ15%ï¼‰</option>
                        <option value="Q">å®¹é”™çº§åˆ«ï¼šQï¼ˆ25%ï¼‰</option>
                        <option value="H">å®¹é”™çº§åˆ«ï¼šHï¼ˆ30%ï¼‰</option>
                    </select>
                </div>
                <div class="btn-group">
                    <button class="btn-primary" onclick="generateQRCode()">ğŸ”„ ç”ŸæˆäºŒç»´ç </button>
                    <button class="btn-success" onclick="downloadQRCode()">ğŸ’¾ ä¸‹è½½äºŒç»´ç </button>
                    <button class="btn-default" onclick="clearQRCodeAll()">ğŸ§¹ æ¸…ç©º</button>
                </div>
            </div>
            <div class="qrcode-container" id="qrcodeContainer">
                <div id="qrcode"></div>
            </div>
            <div id="qrcodeTip" class="tip"></div>
            <div class="tip">ğŸ’¡ å®¹é”™çº§åˆ«è¶Šé«˜ï¼ŒäºŒç»´ç å¯æŸåé¢ç§¯è¶Šå¤§ï¼Œå»ºè®®é€‰M/Qçº§åˆ«</div>
        </div>

        <!-- é¢œè‰²è½¬æ¢å·¥å…· -->
        <div class="tool-content" id="colorTool">
            <div class="card-header">
                <h3 class="card-title">ğŸ¨ é¢œè‰²æ ¼å¼è½¬æ¢</h3>
            </div>
            <div class="input-group">
                <div class="input-row">
                    <input type="text" id="colorInput" placeholder="è¾“å…¥é¢œè‰²å€¼ï¼ˆ#hex/RGB/RGBA/HSLï¼‰ï¼Œå¦‚ #409effã€rgb(64,158,255)">
                    <div class="color-preview" id="colorPreview" onclick="openColorPicker()"></div>
                </div>
                <div class="btn-group">
                    <button class="btn-primary" onclick="convertColor()">ğŸ”„ è½¬æ¢é¢œè‰²</button>
                    <button class="btn-default" onclick="clearColorAll()">ğŸ§¹ æ¸…ç©º</button>
                </div>
            </div>
            <div style="margin: 16px 0; display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 12px;">
                <div class="input-group">
                    <label style="font-size: 14px; color: var(--text-secondary); margin-bottom: 4px;">HEX æ ¼å¼</label>
                    <input type="text" id="colorHex" readonly placeholder="#RRGGBB">
                    <button class="btn-default" onclick="copyColor('colorHex')">ğŸ“‹ å¤åˆ¶</button>
                </div>
                <div class="input-group">
                    <label style="font-size: 14px; color: var(--text-secondary); margin-bottom: 4px;">RGB æ ¼å¼</label>
                    <input type="text" id="colorRgb" readonly placeholder="rgb(R,G,B)">
                    <button class="btn-default" onclick="copyColor('colorRgb')">ğŸ“‹ å¤åˆ¶</button>
                </div>
                <div class="input-group">
                    <label style="font-size: 14px; color: var(--text-secondary); margin-bottom: 4px;">RGBA æ ¼å¼</label>
                    <input type="text" id="colorRgba" readonly placeholder="rgba(R,G,B,A)">
                    <button class="btn-default" onclick="copyColor('colorRgba')">ğŸ“‹ å¤åˆ¶</button>
                </div>
                <div class="input-group">
                    <label style="font-size: 14px; color: var(--text-secondary); margin-bottom: 4px;">HSL æ ¼å¼</label>
                    <input type="text" id="colorHsl" readonly placeholder="hsl(H,S,L)">
                    <button class="btn-default" onclick="copyColor('colorHsl')">ğŸ“‹ å¤åˆ¶</button>
                </div>
            </div>
            <div id="colorTip" class="tip"></div>
            <div class="tip">ğŸ’¡ æ”¯æŒ #fffã€#ffffffã€rgb(255,255,255)ã€rgba(255,255,255,1)ã€hsl(0,0%,100%) ç­‰æ ¼å¼è¾“å…¥</div>
        </div>

        <!-- å•ä½æ¢ç®—å·¥å…· -->
        <div class="tool-content" id="unitTool">
            <div class="card-header">
                <h3 class="card-title">ğŸ“ å¸¸ç”¨å•ä½æ¢ç®—</h3>
            </div>
            <div class="input-group">
                <div class="input-row">
                    <select id="fromUnit">
                        <option value="px" selected>åƒç´  (px)</option>
                        <option value="rem">REM (rem)</option>
                        <option value="em">EM (em)</option>
                        <option value="pt">ç‚¹ (pt)</option>
                        <option value="cm">å˜ç±³ (cm)</option>
                        <option value="mm">æ¯«ç±³ (mm)</option>
                        <option value="in">è‹±å¯¸ (in)</option>
                    </select>
                    <input type="number" id="unitInput" placeholder="è¾“å…¥æ•°å€¼" value="16">
                </div>
                <div class="input-row">
                    <select id="toUnit">
                        <option value="px">åƒç´  (px)</option>
                        <option value="rem" selected>REM (rem)</option>
                        <option value="em">EM (em)</option>
                        <option value="pt">ç‚¹ (pt)</option>
                        <option value="cm">å˜ç±³ (cm)</option>
                        <option value="mm">æ¯«ç±³ (mm)</option>
                        <option value="in">è‹±å¯¸ (in)</option>
                    </select>
                    <input type="number" id="unitOutput" readonly placeholder="æ¢ç®—ç»“æœ">
                </div>
                <div class="btn-group">
                    <button class="btn-primary" onclick="convertUnit()">ğŸ”„ æ¢ç®—å•ä½</button>
                    <button class="btn-default" onclick="swapUnit()">ğŸ”„ äº’æ¢å•ä½</button>
                    <button class="btn-default" onclick="clearUnitAll()">ğŸ§¹ æ¸…ç©º</button>
                </div>
            </div>
            <div id="unitTip" class="tip"></div>
            <div class="tip">ğŸ’¡ åŸºäº 1rem = 16pxï¼ˆæµè§ˆå™¨é»˜è®¤ï¼‰ã€1in = 96pxã€1pt = 1.333px æ¢ç®—</div>
        </div>

        <!-- MD5åŠ å¯†å·¥å…· -->
        <div class="tool-content" id="md5Tool">
            <div class="card-header">
                <h3 class="card-title">ğŸ”’ MD5åŠ å¯†</h3>
                <span class="char-count" id="md5InputCharCount">å­—ç¬¦æ•°ï¼š0</span>
            </div>
            <textarea id="md5Input" placeholder="è¾“å…¥è¦åŠ å¯†çš„æ–‡æœ¬" oninput="updateMd5CharCount()"></textarea>
            <div class="checkbox-group">
                <div class="checkbox-item">
                    <input type="checkbox" id="md5Upper" checked>
                    <label for="md5Upper">ç»“æœå¤§å†™</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="md532">
                    <label for="md532">32ä½åŠ å¯†ï¼ˆé»˜è®¤16ä½ï¼‰</label>
                </div>
            </div>
            <div class="btn-group">
                <button class="btn-primary" onclick="encryptMD5()">ğŸ”„ MD5åŠ å¯†</button>
                <button class="btn-default" onclick="copyMd5Output()">ğŸ“‹ å¤åˆ¶ç»“æœ</button>
                <button class="btn-default" onclick="clearMd5All()">ğŸ§¹ æ¸…ç©º</button>
            </div>
            <div class="card-header" style="margin-top: 24px;">
                <h3 class="card-title">ğŸ“¤ åŠ å¯†ç»“æœ</h3>
            </div>
            <input type="text" id="md5Output" readonly placeholder="åŠ å¯†åçš„MD5å€¼ä¼šæ˜¾ç¤ºåœ¨è¿™é‡Œ...">
            <div id="md5Tip" class="tip"></div>
            <div class="tip">ğŸ’¡ MD5æ˜¯ä¸å¯é€†åŠ å¯†ç®—æ³•ï¼Œå¸¸ç”¨äºå¯†ç å­˜å‚¨ã€æ–‡ä»¶æ ¡éªŒç­‰åœºæ™¯</div>
        </div>

        <!-- æ­£åˆ™æµ‹è¯•å·¥å…· -->
        <div class="tool-content" id="regexTool">
            <div class="card-header">
                <h3 class="card-title">ğŸ§µ æ­£åˆ™è¡¨è¾¾å¼æµ‹è¯•</h3>
            </div>
            <div class="input-group">
                <input type="text" id="regexPattern" placeholder="è¾“å…¥æ­£åˆ™è¡¨è¾¾å¼ï¼ˆæ— éœ€/åŒ…è£¹ï¼‰ï¼Œå¦‚ ^\d+$ï¼ˆåŒ¹é…çº¯æ•°å­—ï¼‰">
                <div class="checkbox-group">
                    <div class="checkbox-item">
                        <input type="checkbox" id="regexGlobal" checked>
                        <label for="regexGlobal">å…¨å±€åŒ¹é… (g)</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="regexIgnoreCase">
                        <label for="regexIgnoreCase">å¿½ç•¥å¤§å°å†™ (i)</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="regexMultiline">
                        <label for="regexMultiline">å¤šè¡ŒåŒ¹é… (m)</label>
                    </div>
                </div>
                <textarea id="regexInput" placeholder="è¾“å…¥è¦æµ‹è¯•çš„æ–‡æœ¬" rows="6"></textarea>
                <div class="btn-group">
                    <button class="btn-primary" onclick="testRegex()">ğŸ”„ æµ‹è¯•æ­£åˆ™</button>
                    <button class="btn-default" onclick="clearRegexAll()">ğŸ§¹ æ¸…ç©º</button>
                </div>
            </div>
            <div class="card-header">
                <h3 class="card-title">ğŸ“¤ åŒ¹é…ç»“æœ</h3>
            </div>
            <div class="regex-result" id="regexResult">
                <div style="color: var(--text-secondary); text-align: center; padding: 20px;">è¯·è¾“å…¥æ­£åˆ™è¡¨è¾¾å¼å’Œæµ‹è¯•æ–‡æœ¬åç‚¹å‡»æµ‹è¯•</div>
            </div>
            <div id="regexTip" class="tip"></div>
            <div class="tip">ğŸ’¡ å¸¸ç”¨æ­£åˆ™ç¤ºä¾‹ï¼šæ‰‹æœºå·(^1[3-9]\d{9}$)ã€é‚®ç®±(^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$)ã€URL(^https?://.+) </div>
        </div>
    </div>

    <script>
        // å…¨å±€å˜é‡
        let currentTheme = localStorage.getItem('toolTheme') || 'light';
        const copyToast = document.getElementById('copyToast');
        let qrcodeInstance = null; // äºŒç»´ç å®ä¾‹
        
        // é¡µé¢åˆå§‹åŒ–
        window.onload = function() {
            // åˆå§‹åŒ–ä¸»é¢˜
            document.documentElement.setAttribute('data-theme', currentTheme);
            updateThemeUI();
            
            // åˆå§‹åŒ–å­—ç¬¦è®¡æ•°
            updateJsonCharCount();
            updateCaseCharCount();
            updateUrlCharCount();
            updateTextCharCount();
            updateMd5CharCount();
            countText();
            
            // ä¸»åˆ†ç±»æ ‡ç­¾åˆ‡æ¢
            initMainTabs();
            
            // å­æ ‡ç­¾åˆ‡æ¢åˆå§‹åŒ–
            initSubTabs('coreSubTabs');
            initSubTabs('textSubTabs');
            initSubTabs('featureSubTabs');
        };

        // ===================== åŸºç¡€é€šç”¨åŠŸèƒ½ =====================
        // ä¸»é¢˜åˆ‡æ¢
        document.getElementById('themeSwitch').addEventListener('click', () => {
            currentTheme = currentTheme === 'light' ? 'dark' : 'light';
            document.documentElement.setAttribute('data-theme', currentTheme);
            localStorage.setItem('toolTheme', currentTheme);
            updateThemeUI();
        });

        // æ›´æ–°ä¸»é¢˜UI
        function updateThemeUI() {
            const themeIcon = document.getElementById('themeIcon');
            const themeText = document.getElementById('themeText');
            if (currentTheme === 'dark') {
                themeIcon.textContent = 'ğŸŒ™';
                themeText.textContent = 'åˆ‡æ¢äº®è‰²æ¨¡å¼';
            } else {
                themeIcon.textContent = 'ğŸŒ';
                themeText.textContent = 'åˆ‡æ¢æš—é»‘æ¨¡å¼';
            }
        }

        // ä¸»åˆ†ç±»æ ‡ç­¾åˆ‡æ¢
        function initMainTabs() {
            document.querySelectorAll('.main-tab').forEach(tab => {
                tab.addEventListener('click', () => {
                    // ç§»é™¤æ‰€æœ‰ä¸»æ ‡ç­¾æ¿€æ´»çŠ¶æ€
                    document.querySelectorAll('.main-tab').forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    
                    // éšè—æ‰€æœ‰å­æ ‡ç­¾å’Œå·¥å…·å†…å®¹
                    document.getElementById('coreSubTabs').style.display = 'none';
                    document.getElementById('textSubTabs').style.display = 'none';
                    document.getElementById('featureSubTabs').style.display = 'none';
                    document.querySelectorAll('.tool-content').forEach(c => c.classList.remove('active'));
                    
                    // æ˜¾ç¤ºå¯¹åº”å­æ ‡ç­¾å’Œç¬¬ä¸€ä¸ªå·¥å…·
                    const category = tab.getAttribute('data-category');
                    document.getElementById(`${category}SubTabs`).style.display = 'flex';
                    
                    // æ¿€æ´»ç¬¬ä¸€ä¸ªå­æ ‡ç­¾å¯¹åº”çš„å·¥å…·
                    const firstSubTab = document.querySelector(`#${category}SubTabs .sub-tab.active`);
                    if (firstSubTab) {
                        const tabId = firstSubTab.getAttribute('data-tab');
                        document.getElementById(tabId).classList.add('active');
                    }
                });
            });
        }

        // å­æ ‡ç­¾åˆ‡æ¢åˆå§‹åŒ–
        function initSubTabs(tabsId) {
            document.querySelectorAll(`#${tabsId} .sub-tab`).forEach(tab => {
                tab.addEventListener('click', () => {
                    // ç§»é™¤åŒåˆ†ç±»ä¸‹æ‰€æœ‰å­æ ‡ç­¾æ¿€æ´»çŠ¶æ€
                    document.querySelectorAll(`#${tabsId} .sub-tab`).forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    
                    // éšè—æ‰€æœ‰å·¥å…·å†…å®¹
                    document.querySelectorAll('.tool-content').forEach(c => c.classList.remove('active'));
                    
                    // æ¿€æ´»å½“å‰å·¥å…·
                    const tabId = tab.getAttribute('data-tab');
                    document.getElementById(tabId).classList.add('active');
                });
            });
        }

        // é€šç”¨å¤åˆ¶å‡½æ•°
        function copyToClipboard(text, tipEl) {
            if (!text) {
                tipEl.textContent = 'âŒ æš‚æ— å†…å®¹å¯å¤åˆ¶ï¼';
                tipEl.classList.add('error');
                tipEl.classList.remove('success');
                setTimeout(() => tipEl.textContent = '', 2000);
                return;
            }

            navigator.clipboard.writeText(text).then(() => {
                // æ˜¾ç¤ºåŠ¨ç”»æç¤º
                copyToast.style.animation = 'none';
                copyToast.offsetHeight; // è§¦å‘é‡ç»˜
                copyToast.style.animation = 'copySuccess 1s ease forwards';
                tipEl.textContent = 'âœ… å¤åˆ¶æˆåŠŸï¼';
                tipEl.classList.add('success');
                tipEl.classList.remove('error');
                setTimeout(() => tipEl.textContent = '', 3000);
            }).catch(() => {
                // å…¼å®¹ä½ç‰ˆæœ¬æµè§ˆå™¨
                const textArea = document.createElement('textarea');
                textArea.value = text;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                copyToast.style.animation = 'none';
                copyToast.offsetHeight;
                copyToast.style.animation = 'copySuccess 1s ease forwards';
                tipEl.textContent = 'âœ… å¤åˆ¶æˆåŠŸï¼';
                tipEl.classList.add('success');
                tipEl.classList.remove('error');
                setTimeout(() => tipEl.textContent = '', 3000);
            });
        }

        // ===================== æ ¸å¿ƒåŸºç¡€å·¥å…· =====================
        // JSONå·¥å…·
        function updateJsonCharCount() {
            const inputLen = document.getElementById('jsonInput').value.length;
            document.getElementById('jsonInputCharCount').textContent = `å­—ç¬¦æ•°ï¼š${inputLen}`;
            
            const outputLen = document.getElementById('jsonOutput').value.length;
            document.getElementById('jsonOutputCharCount').textContent = `å­—ç¬¦æ•°ï¼š${outputLen}`;
        }

        function formatJson() {
            const input = document.getElementById('jsonInput').value.trim();
            const output = document.getElementById('jsonOutput');
            const tip = document.getElementById('jsonTip');
            
            if (!input) {
                output.value = '';
                tip.textContent = 'âŒ è¯·è¾“å…¥JSONæ–‡æœ¬ï¼';
                tip.classList.add('error');
                tip.classList.remove('success');
                updateJsonCharCount();
                return;
            }

            try {
                const parsed = JSON.parse(input);
                const formatted = JSON.stringify(parsed, null, 4);
                output.value = formatted;
                tip.textContent = 'âœ… JSONæ ¼å¼åŒ–æˆåŠŸï¼';
                tip.classList.add('success');
                tip.classList.remove('error');
            } catch (e) {
                output.value = '';
                tip.textContent = `âŒ JSONæ ¼å¼é”™è¯¯ï¼š${e.message}`;
                tip.classList.add('error');
                tip.classList.remove('success');
            }
            updateJsonCharCount();
        }

        function compressJson() {
            const input = document.getElementById('jsonInput').value.trim();
            const output = document.getElementById('jsonOutput');
            const tip = document.getElementById('jsonTip');
            
            if (!input) {
                output.value = '';
                tip.textContent = 'âŒ è¯·è¾“å…¥JSONæ–‡æœ¬ï¼';
                tip.classList.add('error');
                tip.classList.remove('success');
                updateJsonCharCount();
                return;
            }

            try {
                const parsed = JSON.parse(input);
                const compressed = JSON.stringify(parsed);
                output.value = compressed;
                tip.textContent = 'âœ… JSONå‹ç¼©æˆåŠŸï¼';
                tip.classList.add('success');
                tip.classList.remove('error');
            } catch (e) {
                output.value = '';
                tip.textContent = `âŒ JSONæ ¼å¼é”™è¯¯ï¼š${e.message}`;
                tip.classList.add('error');
                tip.classList.remove('success');
            }
            updateJsonCharCount();
        }

        function validateJson() {
            const input = document.getElementById('jsonInput').value.trim();
            const tip = document.getElementById('jsonTip');
            
            if (!input) {
                tip.textContent = 'âŒ è¯·è¾“å…¥JSONæ–‡æœ¬ï¼';
                tip.classList.add('error');
                tip.classList.remove('success');
                return;
            }

            try {
                JSON.parse(input);
                tip.textContent = 'âœ… JSONæ ¼å¼éªŒè¯é€šè¿‡ï¼';
                tip.classList.add('success');
                tip.classList.remove('error');
            } catch (e) {
                tip.textContent = `âŒ JSONæ ¼å¼é”™è¯¯ï¼š${e.message}`;
                tip.classList.add('error');
                tip.classList.remove('success');
            }
        }

        function clearJsonAll() {
            document.getElementById('jsonInput').value = '';
            document.getElementById('jsonOutput').value = '';
            document.getElementById('jsonTip').textContent = '';
            document.getElementById('jsonTip').classList.remove('success', 'error');
            updateJsonCharCount();
        }

        function copyJsonOutput() {
            const text = document.getElementById('jsonOutput').value;
            copyToClipboard(text, document.getElementById('jsonTip'));
        }

        // æ—¶é—´æˆ³è½¬æ¢å·¥å…·
        function convertTimestamp() {
            const timestamp = document.getElementById('timestampInput').value;
            const type = document.getElementById('timestampType').value;
            const tip = document.getElementById('timeTip');
            
            if (!timestamp) {
                clearTimeResult();
                return;
            }

            try {
                let ts = parseInt(timestamp);
                // å¤„ç†ç§’çº§æ—¶é—´æˆ³
                if (type === 's') ts = ts * 1000;
                
                const date = new Date(ts);
                if (isNaN(date.getTime())) throw new Error('æ— æ•ˆçš„æ—¶é—´æˆ³');
                
                // æ ¼å¼åŒ–æ—¥æœŸ
                const year = date.getFullYear();
                const month = String(date.getMonth() + 1).padStart(2, '0');
                const day = String(date.getDate()).padStart(2, '0');
                const hours = String(date.getHours()).padStart(2, '0');
                const minutes = String(date.getMinutes()).padStart(2, '0');
                const seconds = String(date.getSeconds()).padStart(2, '0');
                const week = ['æ—¥', 'ä¸€', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­'][date.getDay()];
                
                // æ›´æ–°ç»“æœ
                document.getElementById('datetimeOutput').value = `${year}-${month}-${day} ${hours}:${minutes}:${seconds}`;
                document.getElementById('dateOutput').value = `${year}-${month}-${day}`;
                document.getElementById('timeOutput').value = `${hours}:${minutes}:${seconds}`;
                document.getElementById('weekOutput').value = `æ˜ŸæœŸ${week}`;
                
                tip.textContent = 'âœ… æ—¶é—´æˆ³è½¬æ¢æˆåŠŸï¼';
                tip.classList.add('success');
                tip.classList.remove('error');
            } catch (e) {
                clearTimeResult();
                tip.textContent = `âŒ ${e.message}`;
                tip.classList.add('error');
                tip.classList.remove('success');
            }
        }

        function getCurrentTimestamp() {
            const now = new Date();
            const ms = now.getTime();
            const s = Math.floor(ms / 1000);
            
            document.getElementById('timestampInput').value = document.getElementById('timestampType').value === 'ms' ? ms : s;
            convertTimestamp();
        }

        function clearTimeResult() {
            document.getElementById('datetimeOutput').value = '';
            document.getElementById('dateOutput').value = '';
            document.getElementById('timeOutput').value = '';
            document.getElementById('weekOutput').value = '';
        }

        function copyTimestampResult(id) {
            const text = document.getElementById(id).value;
            copyToClipboard(text, document.getElementById('timeTip'));
        }

        function clearTimeAll() {
            document.getElementById('timestampInput').value = '';
            clearTimeResult();
            document.getElementById('timeTip').textContent = '';
            document.getElementById('timeTip').classList.remove('success', 'error');
        }

        // è¿›åˆ¶è½¬æ¢å·¥å…·
        function convertRadix() {
            const input = document.getElementById('radixInput').value.trim();
            const fromRadix = parseInt(document.getElementById('fromRadix').value);
            const toRadix = parseInt(document.getElementById('toRadix').value);
            const tip = document.getElementById('radixTip');
            
            if (!input) {
                clearRadixResult();
                return;
            }

            try {
                // å…ˆè½¬æ¢ä¸ºåè¿›åˆ¶
                const decimal = parseInt(input, fromRadix);
                if (isNaN(decimal)) throw new Error('è¾“å…¥çš„æ•°å€¼æ— æ•ˆ');
                
                // è½¬æ¢ä¸ºå„è¿›åˆ¶
                document.getElementById('binaryOutput').value = decimal.toString(2);
                document.getElementById('octalOutput').value = decimal.toString(8);
                document.getElementById('decimalOutput').value = decimal.toString(10);
                document.getElementById('hexOutput').value = decimal.toString(16).toUpperCase();
                
                tip.textContent = 'âœ… è¿›åˆ¶è½¬æ¢æˆåŠŸï¼';
                tip.classList.add('success');
                tip.classList.remove('error');
            } catch (e) {
                clearRadixResult();
                tip.textContent = `âŒ ${e.message}`;
                tip.classList.add('error');
                tip.classList.remove('success');
            }
        }

        function swapRadix() {
            const fromRadix = document.getElementById('fromRadix');
            const toRadix = document.getElementById('toRadix');
            const temp = fromRadix.value;
            fromRadix.value = toRadix.value;
            toRadix.value = temp;
            convertRadix();
        }

        function clearRadixResult() {
            document.getElementById('binaryOutput').value = '';
            document.getElementById('octalOutput').value = '';
            document.getElementById('decimalOutput').value = '';
            document.getElementById('hexOutput').value = '';
        }

        function clearRadixAll() {
            document.getElementById('radixInput').value = '';
            document.getElementById('fromRadix').value = '10';
            document.getElementById('toRadix').value = '16';
            clearRadixResult();
            document.getElementById('radixTip').textContent = '';
            document.getElementById('radixTip').classList.remove('success', 'error');
        }

        // ===================== æ–‡æœ¬æ‰©å±•å·¥å…· =====================
        // å¤§å°å†™è½¬æ¢
        function updateCaseCharCount() {
            const inputLen = document.getElementById('caseInput').value.length;
            document.getElementById('caseInputCharCount').textContent = `å­—ç¬¦æ•°ï¼š${inputLen}`;
            
            const outputLen = document.getElementById('caseOutput').value.length;
            document.getElementById('caseOutputCharCount').textContent = `å­—ç¬¦æ•°ï¼š${outputLen}`;
        }

        function toUpperCase() {
            const input = document.getElementById('caseInput').value;
            document.getElementById('caseOutput').value = input.toUpperCase();
            updateCaseCharCount();
            showTip('caseTip', 'âœ… å·²è½¬æ¢ä¸ºå…¨éƒ¨å¤§å†™ï¼', 'success');
        }

        function toLowerCase() {
            const input = document.getElementById('caseInput').value;
            document.getElementById('caseOutput').value = input.toLowerCase();
            updateCaseCharCount();
            showTip('caseTip', 'âœ… å·²è½¬æ¢ä¸ºå…¨éƒ¨å°å†™ï¼', 'success');
        }

        function toFirstUpperCase() {
            const input = document.getElementById('caseInput').value;
            if (!input) {
                document.getElementById('caseOutput').value = '';
                updateCaseCharCount();
                return;
            }
            const result = input.toLowerCase().replace(/^\w/, c => c.toUpperCase());
            document.getElementById('caseOutput').value = result;
            updateCaseCharCount();
            showTip('caseTip', 'âœ… å·²è½¬æ¢ä¸ºé¦–å­—æ¯å¤§å†™ï¼', 'success');
        }

        function toReverseCase() {
            const input = document.getElementById('caseInput').value;
            if (!input) {
                document.getElementById('caseOutput').value = '';
                updateCaseCharCount();
                return;
            }
            let result = '';
            for (let i = 0; i < input.length; i++) {
                const char = input[i];
                result += char === char.toUpperCase() ? char.toLowerCase() : char.toUpperCase();
            }
            document.getElementById('caseOutput').value = result;
            updateCaseCharCount();
            showTip('caseTip', 'âœ… å·²åè½¬å¤§å°å†™ï¼', 'success');
        }

        function clearCaseAll() {
            document.getElementById('caseInput').value = '';
            document.getElementById('caseOutput').value = '';
            clearTip('caseTip');
            updateCaseCharCount();
        }

        function copyCaseOutput() {
            const text = document.getElementById('caseOutput').value;
            copyToClipboard(text, document.getElementById('caseTip'));
        }

        // URLç¼–è§£ç 
        function updateUrlCharCount() {
            const inputLen = document.getElementById('urlInput').value.length;
            document.getElementById('urlInputCharCount').textContent = `å­—ç¬¦æ•°ï¼š${inputLen}`;
            
            const outputLen = document.getElementById('urlOutput').value.length;
            document.getElementById('urlOutputCharCount').textContent = `å­—ç¬¦æ•°ï¼š${outputLen}`;
        }

        function urlEncode() {
            const input = document.getElementById('urlInput').value;
            const output = document.getElementById('urlOutput');
            const tip = document.getElementById('urlTip');
            
            if (!input) {
                output.value = '';
                showTip('urlTip', 'âŒ è¯·è¾“å…¥è¦ç¼–ç çš„å†…å®¹ï¼', 'error');
                updateUrlCharCount();
                return;
            }

            try {
                output.value = encodeURIComponent(input);
                showTip('urlTip', 'âœ… URLç¼–ç æˆåŠŸï¼', 'success');
            } catch (e) {
                output.value = '';
                showTip('urlTip', `âŒ ç¼–ç å¤±è´¥ï¼š${e.message}`, 'error');
            }
            updateUrlCharCount();
        }

        function urlDecode() {
            const input = document.getElementById('urlInput').value;
            const output = document.getElementById('urlOutput');
            const tip = document.getElementById('urlTip');
            
            if (!input) {
                output.value = '';
                showTip('urlTip', 'âŒ è¯·è¾“å…¥è¦è§£ç çš„å†…å®¹ï¼', 'error');
                updateUrlCharCount();
                return;
            }

            try {
                output.value = decodeURIComponent(input);
                showTip('urlTip', 'âœ… URLè§£ç æˆåŠŸï¼', 'success');
            } catch (e) {
                output.value = '';
                showTip('urlTip', `âŒ è§£ç å¤±è´¥ï¼š${e.message}ï¼ˆè¯·æ£€æŸ¥ç¼–ç æ ¼å¼ï¼‰`, 'error');
            }
            updateUrlCharCount();
        }

        function clearUrlAll() {
            document.getElementById('urlInput').value = '';
            document.getElementById('urlOutput').value = '';
            clearTip('urlTip');
            updateUrlCharCount();
        }

        function copyUrlOutput() {
            const text = document.getElementById('urlOutput').value;
            copyToClipboard(text, document.getElementById('urlTip'));
        }

        // æ–‡æœ¬å¤„ç†
        function updateTextCharCount() {
            const inputLen = document.getElementById('textInput').value.length;
            document.getElementById('textInputCharCount').textContent = `å­—ç¬¦æ•°ï¼š${inputLen}`;
            
            const outputLen = document.getElementById('textOutput').value.length;
            document.getElementById('textOutputCharCount').textContent = `å­—ç¬¦æ•°ï¼š${outputLen}`;
        }

        function textDeduplicate() {
            const input = document.getElementById('textInput').value;
            const output = document.getElementById('textOutput');
            const tip = document.getElementById('textTip');
            
            if (!input) {
                output.value = '';
                showTip('textTip', 'âŒ è¯·è¾“å…¥è¦å¤„ç†çš„æ–‡æœ¬ï¼', 'error');
                updateTextCharCount();
                return;
            }

            let result = input;
            // å…ˆå¤„ç†ç©ºæ ¼/æ¢è¡Œ
            result = textRemoveSpaceHandler(result, false);
            
            // å»é‡é€»è¾‘
            const isLineDedup = document.getElementById('lineDedup').checked;
            if (isLineDedup) {
                const lines = result.split('\n');
                const uniqueLines = [...new Set(lines)].filter(line => line.trim() !== '');
                result = uniqueLines.join('\n');
            } else {
                const chars = result.split('');
                const uniqueChars = [...new Set(chars)];
                result = uniqueChars.join('');
            }

            output.value = result;
            updateTextCharCount();
            showTip('textTip', `âœ… æ–‡æœ¬å»é‡å®Œæˆï¼ˆ${isLineDedup ? 'æŒ‰è¡Œ' : 'å…¨å±€å­—ç¬¦'}ï¼‰ï¼`, 'success');
        }

        function textRemoveSpace() {
            const input = document.getElementById('textInput').value;
            const output = document.getElementById('textOutput');
            const tip = document.getElementById('textTip');
            
            if (!input) {
                output.value = '';
                showTip('textTip', 'âŒ è¯·è¾“å…¥è¦å¤„ç†çš„æ–‡æœ¬ï¼', 'error');
                updateTextCharCount();
                return;
            }

            const result = textRemoveSpaceHandler(input, true);
            output.value = result;
            updateTextCharCount();
            showTip('textTip', 'âœ… ç©ºæ ¼/æ¢è¡Œæ¸…ç†å®Œæˆï¼', 'success');
        }

        function textRemoveSpaceHandler(text, isIndependent) {
            let result = text;
            if (document.getElementById('trimSpace').checked || isIndependent) {
                result = result.trim();
            }
            if (document.getElementById('removeAllSpace').checked) {
                result = result.replace(/\s+/g, '');
            }
            if (document.getElementById('removeLineBreak').checked) {
                result = result.replace(/\n|\r/g, '');
            }
            return result;
        }

        function clearTextAll() {
            document.getElementById('textInput').value = '';
            document.getElementById('textOutput').value = '';
            clearTip('textTip');
            updateTextCharCount();
        }

        function copyTextOutput() {
            const text = document.getElementById('textOutput').value;
            copyToClipboard(text, document.getElementById('textTip'));
        }

        // å¯†ç ç”Ÿæˆ
        function generatePassword() {
            const length = parseInt(document.getElementById('passwordLength').value) || 16;
            const includeUpper = document.getElementById('includeUpper').checked;
            const includeLower = document.getElementById('includeLower').checked;
            const includeNumber = document.getElementById('includeNumber').checked;
            const includeSymbol = document.getElementById('includeSymbol').checked;
            const tip = document.getElementById('passwordTip');
            
            // éªŒè¯é•¿åº¦
            if (length < 6 || length > 32) {
                showTip('passwordTip', 'âŒ å¯†ç é•¿åº¦éœ€åœ¨6-32ä½ä¹‹é—´ï¼', 'error');
                return;
            }
            
            // éªŒè¯è‡³å°‘é€‰æ‹©ä¸€ç§å­—ç¬¦ç±»å‹
            if (!includeUpper && !includeLower && !includeNumber && !includeSymbol) {
                showTip('passwordTip', 'âŒ è‡³å°‘é€‰æ‹©ä¸€ç§å­—ç¬¦ç±»å‹ï¼', 'error');
                return;
            }
            
            // å®šä¹‰å­—ç¬¦é›†
            let charset = '';
            if (includeUpper) charset += 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
            if (includeLower) charset += 'abcdefghijklmnopqrstuvwxyz';
            if (includeNumber) charset += '0123456789';
            if (includeSymbol) charset += '!@#$%^&*()_+-=[]{}|;:,.<>?';
            // ç”Ÿæˆå¯†ç 
            let password = '';
            for (let i = 0; i < length; i++) {
                const randomIndex = Math.floor(Math.random() * charset.length);
                password += charset[randomIndex];
            }
            
            // æ›´æ–°ç»“æœ
            document.getElementById('passwordOutput').value = password;
            showTip('passwordTip', 'âœ… å¯†ç ç”ŸæˆæˆåŠŸï¼', 'success');
        }

        function copyPassword() {
            const password = document.getElementById('passwordOutput').value;
            copyToClipboard(password, document.getElementById('passwordTip'));
        }

        function clearPasswordAll() {
            document.getElementById('passwordLength').value = '16';
            document.getElementById('includeUpper').checked = true;
            document.getElementById('includeLower').checked = true;
            document.getElementById('includeNumber').checked = true;
            document.getElementById('includeSymbol').checked = false;
            document.getElementById('passwordOutput').value = '';
            clearTip('passwordTip');
        }

        // å­—æ•°ç»Ÿè®¡
        function countText() {
            const input = document.getElementById('countInput').value;
            
            // æ€»å­—ç¬¦æ•°ï¼ˆå«ç©ºæ ¼/æ¢è¡Œï¼‰
            const totalChars = input.length;
            
            // çº¯å­—ç¬¦æ•°ï¼ˆä¸å«ç©ºæ ¼/æ¢è¡Œï¼‰
            const pureChars = input.replace(/\s+/g, '').length;
            
            // å•è¯æ•°ï¼ˆæŒ‰ç©ºæ ¼/æ ‡ç‚¹åˆ†éš”ï¼‰
            const wordCount = input.trim() ? input.trim().split(/\s+|[,.;:!?]/).filter(word => word).length : 0;
            
            // è¡Œæ•°
            const lineCount = input.split('\n').length;
            
            // ä¸­æ–‡æ•°
            const cnCount = (input.match(/[\u4e00-\u9fa5]/g) || []).length;
            
            // æ›´æ–°ç»Ÿè®¡ç»“æœ
            document.getElementById('totalChars').textContent = totalChars;
            document.getElementById('pureChars').textContent = pureChars;
            document.getElementById('wordCount').textContent = wordCount;
            document.getElementById('lineCount').textContent = lineCount;
            document.getElementById('cnCount').textContent = cnCount;
        }

        function clearCountAll() {
            document.getElementById('countInput').value = '';
            countText();
        }

        // ===================== ç‰¹è‰²åŠŸèƒ½å·¥å…· =====================
        // äºŒç»´ç ç”Ÿæˆ
        function generateQRCode() {
            const content = document.getElementById('qrcodeInput').value.trim();
            const size = parseInt(document.getElementById('qrcodeSize').value);
            const level = document.getElementById('qrcodeLevel').value;
            const qrcodeContainer = document.getElementById('qrcode');
            const qrcodeTip = document.getElementById('qrcodeTip');

            if (!content) {
                qrcodeTip.textContent = 'âŒ è¯·è¾“å…¥è¦ç”ŸæˆäºŒç»´ç çš„å†…å®¹ï¼';
                qrcodeTip.classList.add('error');
                qrcodeTip.classList.remove('success');
                return;
            }

            // é”€æ¯æ—§çš„äºŒç»´ç å®ä¾‹
            if (qrcodeInstance) {
                qrcodeContainer.innerHTML = '';
                qrcodeInstance = null;
            }

            try {
                // åˆ›å»ºæ–°çš„äºŒç»´ç å®ä¾‹
                qrcodeInstance = new QRCode(qrcodeContainer, {
                    text: content,
                    width: size,
                    height: size,
                    colorDark: "#000000",
                    colorLight: "#ffffff",
                    correctLevel: QRCode.CorrectLevel[level]
                });

                qrcodeTip.textContent = 'âœ… äºŒç»´ç ç”ŸæˆæˆåŠŸï¼';
                qrcodeTip.classList.add('success');
                qrcodeTip.classList.remove('error');
            } catch (e) {
                qrcodeTip.textContent = `âŒ ç”Ÿæˆå¤±è´¥ï¼š${e.message}`;
                qrcodeTip.classList.add('error');
                qrcodeTip.classList.remove('success');
            }
        }

        function downloadQRCode() {
            const qrcodeImg = document.querySelector('#qrcode img');
            const qrcodeTip = document.getElementById('qrcodeTip');

            if (!qrcodeImg) {
                qrcodeTip.textContent = 'âŒ æš‚æ— äºŒç»´ç å¯ä¸‹è½½ï¼';
                qrcodeTip.classList.add('error');
                qrcodeTip.classList.remove('success');
                return;
            }

            // åˆ›å»ºä¸‹è½½é“¾æ¥
            const downloadLink = document.createElement('a');
            downloadLink.href = qrcodeImg.src;
            downloadLink.download = `qrcode_${new Date().getTime()}.png`;
            document.body.appendChild(downloadLink);
            downloadLink.click();
            document.body.removeChild(downloadLink);

            qrcodeTip.textContent = 'âœ… äºŒç»´ç ä¸‹è½½æˆåŠŸï¼';
            qrcodeTip.classList.add('success');
            qrcodeTip.classList.remove('error');
            setTimeout(() => qrcodeTip.textContent = '', 3000);
        }

        function clearQRCodeAll() {
            document.getElementById('qrcodeInput').value = '';
            document.getElementById('qrcodeSize').value = '256';
            document.getElementById('qrcodeLevel').value = 'L';
            if (qrcodeInstance) {
                document.getElementById('qrcode').innerHTML = '';
                qrcodeInstance = null;
            }
            document.getElementById('qrcodeTip').textContent = '';
            document.getElementById('qrcodeTip').classList.remove('success', 'error');
        }

        // é¢œè‰²è½¬æ¢
        function openColorPicker() {
            // åˆ›å»ºä¸´æ—¶é¢œè‰²é€‰æ‹©å™¨
            const colorInput = document.createElement('input');
            colorInput.type = 'color';
            colorInput.value = document.getElementById('colorInput').value || '#409eff';
            
            colorInput.addEventListener('input', (e) => {
                document.getElementById('colorInput').value = e.target.value;
                document.getElementById('colorPreview').style.backgroundColor = e.target.value;
            });

            colorInput.click();
        }

        function convertColor() {
            const colorInput = document.getElementById('colorInput').value.trim();
            const colorPreview = document.getElementById('colorPreview');
            const colorTip = document.getElementById('colorTip');

            if (!colorInput) {
                colorTip.textContent = 'âŒ è¯·è¾“å…¥æœ‰æ•ˆçš„é¢œè‰²å€¼ï¼';
                colorTip.classList.add('error');
                colorTip.classList.remove('success');
                return;
            }

            try {
                // åˆ›å»ºä¸´æ—¶å…ƒç´ è·å–é¢œè‰²
                const tempDiv = document.createElement('div');
                tempDiv.style.color = colorInput;
                document.body.appendChild(tempDiv);
                const computedColor = getComputedStyle(tempDiv).color;
                document.body.removeChild(tempDiv);

                // æ›´æ–°é¢œè‰²é¢„è§ˆ
                colorPreview.style.backgroundColor = colorInput;

                // è½¬æ¢ä¸ºä¸åŒæ ¼å¼
                const hex = rgbToHex(computedColor);
                const rgb = computedColor;
                const rgba = rgbToRgba(computedColor);
                const hsl = rgbToHsl(computedColor);

                // æ›´æ–°è¾“å…¥æ¡†
                document.getElementById('colorHex').value = hex;
                document.getElementById('colorRgb').value = rgb;
                document.getElementById('colorRgba').value = rgba;
                document.getElementById('colorHsl').value = hsl;

                colorTip.textContent = 'âœ… é¢œè‰²è½¬æ¢æˆåŠŸï¼';
                colorTip.classList.add('success');
                colorTip.classList.remove('error');
            } catch (e) {
                colorTip.textContent = `âŒ é¢œè‰²æ ¼å¼æ— æ•ˆï¼š${e.message}`;
                colorTip.classList.add('error');
                colorTip.classList.remove('success');
            }
        }

        // RGBè½¬HEX
        function rgbToHex(rgb) {
            const rgbMatch = rgb.match(/\d+/g);
            if (!rgbMatch || rgbMatch.length < 3) return '';
            const r = parseInt(rgbMatch[0]);
            const g = parseInt(rgbMatch[1]);
            const b = parseInt(rgbMatch[2]);
            return `#${((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1).toUpperCase()}`;
        }

        // RGBè½¬RGBA
        function rgbToRgba(rgb) {
            const rgbMatch = rgb.match(/\d+/g);
            if (!rgbMatch || rgbMatch.length < 3) return '';
            return `rgba(${rgbMatch[0]}, ${rgbMatch[1]}, ${rgbMatch[2]}, 1)`;
        }

        // RGBè½¬HSL
        function rgbToHsl(rgb) {
            const rgbMatch = rgb.match(/\d+/g);
            if (!rgbMatch || rgbMatch.length < 3) return '';
            
            let r = parseInt(rgbMatch[0]) / 255;
            let g = parseInt(rgbMatch[1]) / 255;
            let b = parseInt(rgbMatch[2]) / 255;

            const max = Math.max(r, g, b);
            const min = Math.min(r, g, b);
            let h, s, l = (max + min) / 2;

            if (max === min) {
                h = s = 0;
            } else {
                const d = max - min;
                s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
                
                switch (max) {
                    case r: h = (g - b) / d + (g < b ? 6 : 0); break;
                    case g: h = (b - r) / d + 2; break;
                    case b: h = (r - g) / d + 4; break;
                }
                h /= 6;
            }

            h = Math.round(h * 360);
            s = Math.round(s * 100);
            l = Math.round(l * 100);
            
            return `hsl(${h}, ${s}%, ${l}%)`;
        }

        function copyColor(id) {
            const colorValue = document.getElementById(id).value;
            copyToClipboard(colorValue, document.getElementById('colorTip'));
        }

        function clearColorAll() {
            document.getElementById('colorInput').value = '';
            document.getElementById('colorHex').value = '';
            document.getElementById('colorRgb').value = '';
            document.getElementById('colorRgba').value = '';
            document.getElementById('colorHsl').value = '';
            document.getElementById('colorPreview').style.backgroundColor = '';
            document.getElementById('colorTip').textContent = '';
            document.getElementById('colorTip').classList.remove('success', 'error');
        }

        // å•ä½æ¢ç®—
        function convertUnit() {
            const value = parseFloat(document.getElementById('unitInput').value) || 0;
            const fromUnit = document.getElementById('fromUnit').value;
            const toUnit = document.getElementById('toUnit').value;
            const tip = document.getElementById('unitTip');
            
            // æ¢ç®—åŸºå‡†ï¼š1px ä¸ºåŸºç¡€å•ä½
            const pxValues = {
                px: 1,
                rem: 16,
                em: 16,
                pt: 1.333,
                cm: 96 / 2.54,
                mm: 96 / 25.4,
                in: 96
            };

            try {
                // å…ˆè½¬æ¢ä¸ºpxï¼Œå†è½¬æ¢ä¸ºç›®æ ‡å•ä½
                const pxValue = value * pxValues[fromUnit];
                const result = pxValue / pxValues[toUnit];
                
                document.getElementById('unitOutput').value = result.toFixed(4);
                tip.textContent = 'âœ… å•ä½æ¢ç®—æˆåŠŸï¼';
                tip.classList.add('success');
                tip.classList.remove('error');
            } catch (e) {
                document.getElementById('unitOutput').value = '';
                tip.textContent = `âŒ æ¢ç®—å¤±è´¥ï¼š${e.message}`;
                tip.classList.add('error');
                tip.classList.remove('success');
            }
        }

        function swapUnit() {
            const fromUnit = document.getElementById('fromUnit');
            const toUnit = document.getElementById('toUnit');
            const temp = fromUnit.value;
            fromUnit.value = toUnit.value;
            toUnit.value = temp;
            convertUnit();
        }

        function clearUnitAll() {
            document.getElementById('unitInput').value = '16';
            document.getElementById('fromUnit').value = 'px';
            document.getElementById('toUnit').value = 'rem';
            document.getElementById('unitOutput').value = '';
            document.getElementById('unitTip').textContent = '';
            document.getElementById('unitTip').classList.remove('success', 'error');
        }

        // MD5åŠ å¯†
        function updateMd5CharCount() {
            const inputLen = document.getElementById('md5Input').value.length;
            document.getElementById('md5InputCharCount').textContent = `å­—ç¬¦æ•°ï¼š${inputLen}`;
        }

        function encryptMD5() {
            const input = document.getElementById('md5Input').value.trim();
            const isUpper = document.getElementById('md5Upper').checked;
            const is32bit = document.getElementById('md532').checked;
            const output = document.getElementById('md5Output');
            const tip = document.getElementById('md5Tip');
            
            if (!input) {
                output.value = '';
                tip.textContent = 'âŒ è¯·è¾“å…¥è¦åŠ å¯†çš„æ–‡æœ¬ï¼';
                tip.classList.add('error');
                tip.classList.remove('success');
                return;
            }

            try {
                let md5Result = md5(input);
                // 16ä½åŠ å¯†ï¼ˆå–ä¸­é—´16ä½ï¼‰
                if (!is32bit) {
                    md5Result = md5Result.substr(8, 16);
                }
                // å¤§å°å†™è½¬æ¢
                md5Result = isUpper ? md5Result.toUpperCase() : md5Result.toLowerCase();
                
                output.value = md5Result;
                tip.textContent = `âœ… MD5${is32bit ? '32ä½' : '16ä½'}åŠ å¯†æˆåŠŸï¼`;
                tip.classList.add('success');
                tip.classList.remove('error');
            } catch (e) {
                output.value = '';
                tip.textContent = `âŒ åŠ å¯†å¤±è´¥ï¼š${e.message}`;
                tip.classList.add('error');
                tip.classList.remove('success');
            }
        }

        function copyMd5Output() {
            const text = document.getElementById('md5Output').value;
            copyToClipboard(text, document.getElementById('md5Tip'));
        }

        function clearMd5All() {
            document.getElementById('md5Input').value = '';
            document.getElementById('md5Output').value = '';
            document.getElementById('md5Upper').checked = true;
            document.getElementById('md532').checked = false;
            document.getElementById('md5Tip').textContent = '';
            document.getElementById('md5Tip').classList.remove('success', 'error');
            updateMd5CharCount();
        }

        // æ­£åˆ™æµ‹è¯•
        function testRegex() {
            const pattern = document.getElementById('regexPattern').value.trim();
            const input = document.getElementById('regexInput').value;
            const isGlobal = document.getElementById('regexGlobal').checked;
            const isIgnoreCase = document.getElementById('regexIgnoreCase').checked;
            const isMultiline = document.getElementById('regexMultiline').checked;
            const resultEl = document.getElementById('regexResult');
            const tip = document.getElementById('regexTip');
            
            if (!pattern) {
                resultEl.innerHTML = '<div style="color: var(--danger-color); text-align: center; padding: 20px;">âŒ è¯·è¾“å…¥æ­£åˆ™è¡¨è¾¾å¼ï¼</div>';
                tip.textContent = 'âŒ æ­£åˆ™è¡¨è¾¾å¼ä¸èƒ½ä¸ºç©ºï¼';
                tip.classList.add('error');
                tip.classList.remove('success');
                return;
            }

            try {
                // æ„å»ºæ­£åˆ™è¡¨è¾¾å¼
                const flags = (isGlobal ? 'g' : '') + (isIgnoreCase ? 'i' : '') + (isMultiline ? 'm' : '');
                const regex = new RegExp(pattern, flags);
                
                // æ‰§è¡ŒåŒ¹é…
                const matches = input.match(regex) || [];
                
                // æ¸²æŸ“ç»“æœ
                if (matches.length === 0) {
                    resultEl.innerHTML = '<div style="color: var(--text-secondary); text-align: center; padding: 20px;">ğŸ” æœªåŒ¹é…åˆ°ä»»ä½•å†…å®¹</div>';
                    tip.textContent = 'âœ… æ­£åˆ™æµ‹è¯•å®Œæˆï¼šæœªåŒ¹é…åˆ°å†…å®¹';
                } else {
                    let html = `<div style="margin-bottom: 8px; color: var(--success-color);">âœ… åŒ¹é…åˆ° ${matches.length} ä¸ªç»“æœï¼š</div>`;
                    matches.forEach((match, index) => {
                        html += `<div class="match-item">${index + 1}. <span class="match-text">${match}</span></div>`;
                    });
                    resultEl.innerHTML = html;
                    tip.textContent = `âœ… æ­£åˆ™æµ‹è¯•å®Œæˆï¼šåŒ¹é…åˆ° ${matches.length} ä¸ªç»“æœ`;
                }
                
                tip.classList.add('success');
                tip.classList.remove('error');
            } catch (e) {
                resultEl.innerHTML = `<div style="color: var(--danger-color); text-align: center; padding: 20px;">âŒ æ­£åˆ™è¡¨è¾¾å¼é”™è¯¯ï¼š${e.message}</div>`;
                tip.textContent = `âŒ æ­£åˆ™è¡¨è¾¾å¼é”™è¯¯ï¼š${e.message}`;
                tip.classList.add('error');
                tip.classList.remove('success');
            }
        }

        function clearRegexAll() {
            document.getElementById('regexPattern').value = '';
            document.getElementById('regexInput').value = '';
            document.getElementById('regexGlobal').checked = true;
            document.getElementById('regexIgnoreCase').checked = false;
            document.getElementById('regexMultiline').checked = false;
            document.getElementById('regexResult').innerHTML = '<div style="color: var(--text-secondary); text-align: center; padding: 20px;">è¯·è¾“å…¥æ­£åˆ™è¡¨è¾¾å¼å’Œæµ‹è¯•æ–‡æœ¬åç‚¹å‡»æµ‹è¯•</div>';
            document.getElementById('regexTip').textContent = '';
            document.getElementById('regexTip').classList.remove('success', 'error');
        }

        // ===================== é€šç”¨è¾…åŠ©å‡½æ•° =====================
        // æ˜¾ç¤ºæç¤ºä¿¡æ¯
        function showTip(id, text, type) {
            const tipEl = document.getElementById(id);
            tipEl.textContent = text;
            tipEl.classList.add(type);
            tipEl.classList.remove(type === 'success' ? 'error' : 'success');
            // 3ç§’åæ¸…é™¤æç¤º
            setTimeout(() => {
                if (tipEl.textContent === text) {
                    tipEl.textContent = '';
                    tipEl.classList.remove('success', 'error');
                }
            }, 3000);
        }

        // æ¸…é™¤æç¤ºä¿¡æ¯
        function clearTip(id) {
            const tipEl = document.getElementById(id);
            tipEl.textContent = '';
            tipEl.classList.remove('success', 'error');
        }
    </script>
</body>
</html>